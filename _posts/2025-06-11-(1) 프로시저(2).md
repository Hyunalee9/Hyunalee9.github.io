---
title: "í”„ë¡œì‹œì €(Procedure) 2 "
excerpt: "ì•„ì´í‹°ìœŒ 0611_(1) "
categories:
      - ORACLE11g
tags:
      - ORACLE11g
      - TIL
last-modified-at: 2025-06-11T18:20
---


# í”„ë¡œì‹œì €(2)

â–¶ï¸ **í”„ë¡œì‹œì €ì˜ out ëª¨ë“œ**

í”„ë¡œì‹œì €ì—ì„œ ê°’ì„ í˜¸ì¶œ í™˜ê²½ìœ¼ë¡œ ì „ë‹¬í•œë‹¤. **ë³€ìˆ˜ ë™ìž‘**í•œë‹¤.

```sql
CREATE OR REPLACE PROCEDURE emp_proc(p_id     IN     number,
                                     p_name   OUT    varchar2,
                                     p_sal    OUT    number)
 IS
BEGIN
	  SELECT last_name,salary
		INTO p_name, p_sal
		FROM hr.employees
		WHERE employee_id = p_id;
EXCEPTION
	  WHEN NO_DATA_FOUND THEN
			  dbms_output.put_line(p_id||'ì‚¬ì›ì€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');		
END;
/
```

ðŸ“ out ëª¨ë“œ **í˜¸ì¶œ í™˜ê²½**

```sql
execute emp_proc(ì‹¤ì œê°’, ë³€ìˆ˜, ë³€ìˆ˜)
```

ðŸ“ **bind ë³€ìˆ˜ ì„ ì–¸**

```sql
var b_name varchar2(30)
var b_sal  number

execute emp_proc(100, :b_name, :b_sal)
print :b_name :b_sal
```

ðŸ“ ìµëª… ë¸”ë¡ êµ¬ì¡°

```sql
DECLARE
	v_name varchar2(30);
	v_sal number;
BEGIN
	emp_proc(100,v_name, v_sal);
	dbms_output.put_line(v_name ||' '|| v_sal);	
END;
/
```

â–¶ï¸ **í”„ë¡œì‹œì € IN OUT**

í˜¸ì¶œ í™˜ê²½ì—ì„œ ê°’ì„ í”„ë¡œì‹œì €ë¡œ ì „ë‹¬í•˜ê³  ë™ì¼í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì‹œì €ì—ì„œ ê°’ì„ ë‹¤ì‹œ í˜¸ì¶œ í™˜ê²½ìœ¼ë¡œ ì „ë‹¬í•œë‹¤. **ë³€ìˆ˜ ë™ìž‘**

**ì´ˆê¸°ê°’ì´ í• ë‹¹ëœ ë³€ìˆ˜.**

**(ìž…ë ¥ê°’) 01012345678 â†’ (ì¶œë ¥ê°’) 010 - 1234 - 5678 í”„ë¡œì‹œì € ë§Œë“¤ê¸°**

```sql
SELECT substr('01012345678', 1 , 3) ||'-'||substr('01012345678', 4, 4)||'-'||substr('01012345678',8)
```

```sql
CREATE OR REPLACE PROCEDURE format_phone(p_no IN OUT varchar2)
IS
BEGIN
	p_no := substr(p_no,1,3)||'-'||substr(p_no,4,4)||'-'||substr(p_no,8);
END;
/

-- ìž…ë ¥
execute format_phone(ì´ˆê¸°ê°’ì´ ìžˆëŠ” ë³€ìˆ˜)
```

**ðŸ“ bind ë³€ìˆ˜**

```sql
var b_no varchar2(20)
execute :b_no := '01012345678'
print :b_no

execute format_phone(:b_no)
print :b_no;
```

![image.png](/assets/20250611/1.png)

**ðŸ“** ìµëª… ë¸”ë¡ êµ¬ì¡°

```sql
DECLARE
	v_no varchar2(20) := '01012345678';
BEGIN
	dbms_output.put_line(v_no);
	format_phone(v_no);
	dbms_output.put_line(v_no);
END;
/
```

```sql
-- í…Œì´ë¸” ìƒì„±
cREATE TABLE hr.sawon
(id number, name varchar2(30), day date, deptno number);

-- í”„ë¡œì‹œì € ìƒì„±
CREATE OR REPLACE PROCEDURE hr.sawon_insert
(p_id IN number,
 p_name IN varchar2,
 p_day IN date default sysdate,
 p_deptno IN number := 0)
IS
BEGIN
    INSERT INTO hr.sawon(id,name,day,deptno) VALUES(p_id, p_name, p_day, p_deptno);
END sawon_insert;
/

-- ì†ŒìŠ¤ í™•ì¸
SELECT text
FROM user_source
WHERE name = 'SAWON_INSERT'
ORDER BY line;
```

![image.png](/assets/20250611/2.png)

```sql
desc hr.sawon_insert;
```

![image.png](/assets/20250611/3.png)

â€˜

ðŸ“ **ì‹¤ì œê°’ì„ í˜•ì‹ ë§¤ê°œ ë³€ìˆ˜ì— ìœ„ì¹˜ ì§€ì • ë°©ì‹ìœ¼ë¡œ ìž…ë ¥**

```sql

execute sawon_insert(1,'í™ê¸¸ë™',to_date('2025-01-01','yyyy-mm-dd'),10)
```

![image.png](/assets/20250611/4.png)

ðŸ“**ì‹¤ì œê°’ì„ í˜•ì‹ ë§¤ê°œ ë³€ìˆ˜ì— ì´ë¦„ ì§€ì •(â‡’) ë°©ì‹ìœ¼ë¡œ ìž…ë ¥ (ìˆœì„œ ìƒê´€ ì—†ì´)**

```sql
execute hr.sawon_insert(p_id =>2 , p_name => 'ë°•ì°¬í˜¸', p_deptno => 20);
```

ðŸ“ **ì‹¤ì œê°’ì„ í˜•ì‹ ë§¤ê°œ ë³€ìˆ˜ì— í˜¼í•© ë°©ì‹ìœ¼ë¡œ ìž…ë ¥**

```sql
execute hr.sawon_insert(3,p_name=>'ì œìž„ìŠ¤',p_deptno=>30, p_day=>to_date('2025-06-01', 'yyyy-mm-dd'))
```

![image.png](/assets/20250611/5.png)

ðŸ“ **ì´ë¦„ ì§€ì • ë°©ì‹ ë’¤ì—ëŠ”  ìœ„ì¹˜ ì§€ì • ë°©ì‹ì´ ë‚˜ì˜¤ë©´ ì•ˆëœë‹¤.**

```sql

-- ì˜¤ë¥˜ ë°œìƒ
execute hr.sawon_insert(4, p_nmae => 'oracle',to_date('2025-06-07', 'yyyy-mm-dd') ,p_deptno => 30);
```