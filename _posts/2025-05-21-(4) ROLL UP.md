---
title: "[22ì¼ì°¨] ROLL UP"
excerpt: "ì•„ì´í‹°ìœŒ 0521_(4) "
categories:
      - ORACLE11g
tags:
      -  ORACLE11g
      - TIL
last-modified-at: 2025-05-21T21:08
---

# ROLL UP(8i)

- GROUP BY ì ˆ ì§€ì •ëœ ì—´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ ë°©í–¥ìœ¼ë¡œ ì´ë™í•˜ë©´ì„œ ê·¸ë£¹í™”ë¥¼ ë§Œë“œëŠ” ì—°ì‚°ì
- ì†Œê·¸ë£¹ê°„ì˜ ì†Œê³„ ë° ì´ê³„ë¥¼ êµ¬í•œë‹¤.

ì˜ˆ) 

```sql
SELECT a,b,c, sum(sal)
FROM test
GROUP BY a,b,c;

-- ì—¬ëŸ¬ í…Œì´ë¸” ì°¸ì¡°í•˜ëŠ” ë¬¸ì œ í•´ê²°í•˜ê¸° ìœ„í•´ ROLL UP í•¨ìˆ˜ ì‚¬ìš©
-- sum(sal) = {a,b,c}
SELECT a,b,c, sum(sal)
FROM test
GROUP BY ROLLUP(a,b,c);
```

![image.png](/assets/20250521/14.png)

â†’ ROLL UP í•¨ìˆ˜ ì—†ì—ˆë‹¤ë©´? UNION ALL ì´ìš© 

## grouping

ğŸ“ ì–´ë–¤ ì»¬ëŸ¼ì´ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ ì¡°íšŒ : grouping ì´ìš©

```sql
-- ì‚¬ìš© : 0 , ì‚¬ìš© x : 1
SELECT department_id, job_id, manager_id, sum(salary), grouping(department_id), grouping(job_id), grouping(manager_id)
FROM hr.employees
GROUP BY ROLLUP(department_id, job_id, manager_id);
```

## cube(8i)

- roll up ì—°ì‚°ìë¥¼ í¬í•¨í•˜ê³  ëª¨ë“  ê·¸ë£¹í™”ë¥¼ í•  ìˆ˜ ìˆëŠ” ì—°ì‚°ì.

```sql
SELECT a,b,c, sum(sal)
FROM test
GROUP BY cube(a,b,c);
```

![image.png](/assets/20250521/15.png)

```sql
SELECT department_id, job_id, manager_id, sum(salary)
FROM hr.employees
GROUP BY CUBE(department_id, job_id, manager_id);
```

![image.png](/assets/20250521/16.png)

```sql
SELECT department_id, job_id, manager_id, sum(salary)
FROM hr.employees
GROUP BY CUBE(department_id(job_id, manager_id))
```

![image.png](/assets/20250521/17.png)

```sql
SELECT a, b, null , sum(sal)
FROM test
GROUP BY a, b
UNION ALL 
SELECT a, null , c , sum(sal)
FROM test
GROUP BY a, c
UNION ALL                
SELECT null, null, null , sum(sal)
FROM test;
```

![image.png](/assets/20250521/18.png)

## grouping sets ì—°ì‚°ì(9i)

ë‚´ê°€ ì›í•˜ëŠ” ê·¸ë£¹ì„ ë§Œë“œëŠ” ì—°ì‚°ì.

```sql
SELECT a,b,c, sum(sal)
FROM test
GROUP BY GROUPING SETS((a,b),(a,c),());
```

```sql
SELECT department_id, job_id, manager_id, sum(salary)
FROM hr.employees
GROUP BY GROUPING SETS((department_id,job_id),(department_id, manager_id),());
```

![image.png](/assets/20250521/19.png)