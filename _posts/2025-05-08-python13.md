---
title: "[13ì¼ì°¨] python13"
excerpt: "ì•„ì´í‹°ìœŒ 0508_seaborn ì•ˆì˜ ë‹¤ì–‘í•œ í•¨ìˆ˜ë“¤"
categories:
      - Python
tags:
      - Python
      - TIL
last-modified-at: 2025-05-08T23:15
---


# 250508 ì‹œê°í™”, ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¶„ì„

# ìˆ«ì íƒ€ì… ë³€ìˆ˜(ì»¬ëŸ¼)ë“¤ì˜ box plot

```python
# seabornì˜ irisë°ì´í„°ì…‹ì„ ì´ìš©, ë¡œë“œí›„ iris_dfì— ì €ì¥

sns.boxplot(data=iris_df)   # ë°ì´í„° í”„ë ˆì„ ì•ˆì—ì„œ ìˆ«ì íƒ€ì… ë³€ìˆ˜ë§Œ ëª¨ì•„ì„œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ì¤€ë‹¤.
                            # ìˆ«ì íƒ€ì… ë³€ìˆ˜ê°€ ë§ì§€ ì•Šì„ ë•Œ ì‚¬ìš©, ê°ê°ì˜ ë°ì´í„°ë“¤ì˜ ë²”ìœ„ê°€ ë¹„ìŠ·í•  ë•Œ ì‚¬ìš©
plt.show()
```

![image.png](/assets/20250508/1.png)


ğŸ“ë°ì´í„° íƒ€ì…ê³¼ ì–´ë–¤ ê²°ê³¼ë¥¼ ì›í•˜ëŠëƒì— ë”°ë¼ ì‹œê°í™”í•  ê·¸ë˜í”„ë¥¼ ì í•©í•˜ê²Œ ì„ íƒí•´ì•¼í•¨.

ex)  ìˆ«ì íƒ€ì… ë³€ìˆ˜(ì»¬ëŸ¼)ë“¤ì˜ í‰ê·  ë§‰ëŒ€ ê·¸ë˜í”„ â†’ ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆê² ì§€ë§Œ ì—¬ê¸°ì„  barplotì´ìš©

```python
fig, axes = plt.subplots(nrows=2, ncols=2, figsize=(9,8))

for i, row in enumerate(num_types):
    for j, x in enumerate(row):
        sns.barplot(data=iris_df, y=x, errorbar = None ,ax=axes[i][j])
        # ë¬´ì¡°ê±´ ë²”ì£¼í˜• ë³€ìˆ˜ì™€ í•¨ê»˜ ì¨ì•¼í•˜ëŠ” ì¤„ ì•Œì•˜ëŠ”ë°, ì•„ë‹ˆì˜€ë‹¤.
        # ì—¬ê¸°ì„  x ìƒëµ, estimatorì˜ ê¸°ë³¸ê°’ì´ í‰ê· ì´ë¯€ë¡œ ìƒ
plt.show()
```

```python
# í•œêº¼ë²ˆì— ê·¸ë¦¬ê¸°ë„ ê°€ëŠ¥
sns.barplot(data=iris_df)
plt.ylabel('mean')
plt.show()
```

â†’ barplotì˜ estimatorì— í•¨ìˆ˜ ê°ì²´ë¥¼ ë‚¨ê²¨ë„ ëœë‹¤.  

```python
# ìˆ«ì íƒ€ì… ë³€ìˆ˜ë“¤ì˜ ì¤‘ìœ„ê°’ ë§‰ëŒ€ ê·¸ë˜í”„
# sns.barplot(data=iris_df, estimator= 'median', errorbar=None)   # ì´ë ‡ê²Œ í•´ë„ ë˜ê³ 
sns.barplot(data=iris_df, estimator= np.median , errorbar=None)   # í•¨ìˆ˜ ê°ì²´ë¥¼ ë„˜ê²¨ë„ ëœë‹¤.
# estimator íŒŒë¼ë¯¸í„° : í•¨ìˆ˜ ì´ë¦„ì„ ë¬¸ìì—´ë¡œ ì „ë‹¬('median') í•˜ê±°ë‚˜ ë˜ëŠ” í•¨ìˆ˜ ê°ì²´ë¥¼ ì „ë‹¬(np.median)
# í•¨ìˆ˜ ì´ë¦„ì´ ê¸°ì–µë‚˜ì§€ ì•Šìœ¼ë©´ numpyë¥¼ ì“°ê¸° : 1ì°¨ì› ë°°ì—´ì˜ í‰ê· , ì‚¬ë¶„ìœ„ìˆ˜, ì¤‘ìœ„ê°’ë“± ê³„ì‚° ê°€ëŠ¥
plt.show()
```

`pandas.melt()` : ê°€ë¡œ ë°©í–¥ ë°ì´í„° -> ì„¸ë¡œ ë°ì´í„° ë³€í™˜. (ì—‘ì…€ í”¼ë²— í…Œì´ë¸”ê³¼ ë¹„ìŠ·)

# **DataFrame Concat**

```python
np.random.seed(42)
df1 = pd.DataFrame(data={
    # ì»¬ëŸ¼ì´ë¦„ì„ key, ê°’ì„ ë‚œìˆ˜ë¡œ
    'id': np.arange(1,6),
    'korean' : np.random.randint(101, size=5),  # [0, 101) ë²”ìœ„ì˜ ì •ìˆ˜ ë‚œìˆ˜ 5ê°œë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´
    'english' : np.random.randint(101, size=5)
})
df1
```

```python
df2 = pd.DataFrame(data={
    'id': np.arange(6,11),
    'korean' : np.random.randint(101, size=5),  # [0, 101) ë²”ìœ„ì˜ ì •ìˆ˜ ë‚œìˆ˜ 5ê°œë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´
    'english' : np.random.randint(101, size=5)
})
df2
```

```python
# ë°ì´í„° í”„ë ˆì„ì˜ ë ˆì´ë¸”(ì¸ë±ìŠ¤)ì€ ê²¹ì¹  ìˆ˜ ìˆë‹¤.
# ë‘ ë°ì´í„° í”„ë ˆì„ì„ í•©ì³¤ë‹¤. ëŒ€ìš©ëŸ‰ ë°ì´í„°ì…‹ ë‹¤ë£°ë•Œ ì£¼ë¡œ ì‚¬ìš©..
df = pd.concat([df1, df2], ignore_index=True)  # ê²¹ì¹œ ì¸ë±ìŠ¤ ë¬´ì‹œ. ë ˆì´ë¸” ìƒˆë¡œ ë°°ì¹˜
df
```

# babynames ë°ì´í„°ì…‹

```python
col_names = ['name','gender','births']  # ë°ì´í„°í”„ë ˆì„ì˜ ì»¬ëŸ¼ ì´ë¦„
yobs = []
# 1880 - 2010
for year in range(1880,2011):
    # str(year) ë„ ê°€ëŠ¥ 
    # githubì— ì €ì¥ëœ íŒŒì¼ ê²½ë¡œ
    file_path =f'https://raw.githubusercontent.com/wesm/pydata-book/refs/heads/3rd-edition/datasets/babynames/yob{year}.txt'

    # githubì— ì €ì¥ëœ CSVíŒŒì¼ì„ ì½ì–´ì„œ ë°ì´í„°í”„ë ˆì„ì„ ìƒì„±
    df = pd.read_csv(file_path, names=col_names)

    # ìƒì„±ëœ ë°ì´í„°í”„ë ˆì„ì— year ì»¬ëŸ¼ ì¶”ê°€
    df['year'] = year

    # ë¦¬ìŠ¤íŠ¸ì— ë°ì´í„°í”„ë ˆì„ì„ ì¶”ê°€    
    yobs.append(df)

```

```python
# ë¦¬ìŠ¤íŠ¸ ì›ì†Œ ê°œìˆ˜
len(yobs)    # 2010 - 1880 + 1 = 131
```

```python
# ë°ì´í„° í”„ë ˆì„ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì˜ ë°ì´í„° í”„ë ˆì„ìœ¼ë¡œ í•©ì¹¨(concat)
yob_df = pd.concat(yobs, ignore_index=True)   
```

```python
yob_df.head()  # 1880 
```

![image.png](/assets/20250508/2.png)

```python
yob_df.tail() # 2010
```

![image.png](/assets/20250508/3.png)

1880ë…„ ~ 2010ë…„ ë°ì´í„° í”„ë ˆì„ì´ í•˜ë‚˜ë¡œ ì˜ í•©ì³ì¡Œë‹¤.

## **ì—°ë„ë³„ ì‹ ìƒì•„ ìˆ˜**

```python
births_by_year = yob_df.groupby('year').births.sum()  # ì¹´í…Œê³ ë¦¬ ë³€ìˆ˜ yearë¡œ ë¬¶ì–´ í•©ê³„ë¥¼ ê³„ì‚°í•˜ê² ë‹¤.
births_by_year
```

![image.png](/assets/20250508/4.png)

```python
# ì‹œê°í™”
# ì„  ê·¸ë˜í”„ (ì‹œê³„ì—´ ë°ì´í„°)
sns.lineplot(x=births_by_year.index, y=births_by_year)
plt.show()  
```

![image.png](/assets/20250508/5.png)

â†’ ë‹¨ìœ„ : le6

`groupby()`Â í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ê·¸ë£¹ì„ ì„¤ì •í•˜ëŠ” ë³€ìˆ˜(ì»¬ëŸ¼ ì´ë¦„)ë¥¼ ì¸ë±ìŠ¤ê°€ ì•„ë‹Œ ì»¬ëŸ¼ìœ¼ë¡œ ë§Œë“¤ê¸°

```python
yob_df.groupby(by=['year'],as_index=False).births.sum()  # ë°ì´í„° í”„ë ˆì„
```

![image.png](/assets/20250508/6.png)

â†’ as_index : ê¸°ì¡´ ì¸ë±ìŠ¤ì˜€ë˜ yearì´ ì»¬ëŸ¼ì´ ë˜ì—ˆë‹¤.

**ì‹œë¦¬ì¦ˆ(Series) ë˜ëŠ” ë°ì´í„°í”„ë ˆì„(DataFrame)ì˜ ì¸ë±ìŠ¤(í–‰ ë ˆì´ë¸”)ì„ ì»¬ëŸ¼ìœ¼ë¡œ ë³€í™˜** 

```python
births_by_year.reset_index() 
```

## **ì—°ë„ë³„ ì„±ë³„ ì‹ ìƒì•„ ìˆ˜**

```python
births_by_year_gender = yob_df.groupby(by=['year', 'gender']).births.sum()   # index : year, gender
births_by_year_gender   # Series
```

![image.png](/assets/20250508/7.png)

```python
births_by_year_gender.index  # ë©€í‹° ì¸ë±ìŠ¤
```

```python
yob_df.groupby(by=['year','gender'],as_index=False).births.sum()  # dataframe
```

```python
births_df = births_by_year_gender.reset_index()
#> reset_index()ì—ì„œ ì•„ê·œë¨¼íŠ¸ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šìœ¼ë©´ ëª¨ë“  ë‹¤ë¥¸ ì¸ë±ìŠ¤(Multiindex)ë“¤ì„ ì»¬ëŸ¼ìœ¼ë¡œ ë°˜í™˜
```

```python
births_by_year_gender.reset_index(level=1)   
#> ë‹¤ì¤‘ ì¸ë±ìŠ¤ë“¤ ì¤‘ì—ì„œ levelì´ 1ì¸ ì¸ë±ìŠ¤ë§Œ ì»¬ëŸ¼ìœ¼ë¡œ ë³€í™˜. 
```

```python
births_by_year_gender.reset_index(level='gender')
#> reset_index() í•¨ìˆ˜ì˜ level íŒŒë¼ë¯¸í„°
#> (1) level ìˆ«ìê°’(ì¸ë±ìŠ¤): 0ë¶€í„° ì‹œì‘í•˜ëŠ” ì •ìˆ˜
#> (2) ì¸ë±ìŠ¤ ì´ë¦„
```

```python
# ì‹œê°í™”
sns.lineplot(data=births_df, x='year', y='births', hue='gender')
plt.grid()
plt.show()
```

![image.png](/assets/20250508/8.png)