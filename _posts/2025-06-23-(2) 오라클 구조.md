---
title: "[43ì¼ì°¨] ì˜¤ë¼í´ êµ¬ì¡°"
excerpt: "ì•„ì´í‹°ìœŒ 0623_(2) "
categories:
      - ORACLE19c
tags:
      - ORACLE19c
      - TIL
last-modified-at: 2025-06-23T17:34
---

## â–¶ï¸ ORACLE =

`INSTANCE(ë©”ëª¨ë¦¬, í”„ë¡œì„¸ìŠ¤)` + `DATABASE(ì €ì¥ ì˜ì—­ êµ¬ì¡°)`

![image.png](/assets/20250623/19.png)
ex ) í”„ë¡œì„¸ìŠ¤

![image.png](/assets/20250623/20.png)

**â–¶ï¸ ë¦¬ìŠ¤ë„ˆ** :

í´ë¼ì´ì–¸íŠ¸(client process, user process)ë“¤ì´ ì˜¤ë¼í´ ì ‘ì† ì‹œ, ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ì²´í¬í•œ í›„(Host, PORT, Protocol, SID) **server process(SQLë¬¸ ì²˜ë¦¬ê¸°)ë¥¼ ìƒì„±** â†’ ì¸ìŠ¤í„´ìŠ¤ ì ‘ì† ì—­í• ì„ í•œë‹¤.

ğŸ“ **user process**  

**server processì—ê²Œ sqlë¬¸ì¥ì„ ì „ë‹¬í•˜ê³  ì»´íŒŒì¼ëœ ê²°ê³¼ê°’ì„ ì‚¬ìš©ìì—ê²Œ ëŒë ¤ì£¼ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨  ex) SQL Developer, SQL Plus ë“±**

â–¶ï¸ PGA â†’ UGA(session, ê¶Œí•œ) â†’ Private SQL Area (**Cursor** : SQL ì‹¤í–‰ ë©”ëª¨ë¦¬ ì˜ì—­)

â–¶ï¸ Shared SQL Area : v$sql â†’ ê³µìœ  ì»¤ì„œ (ì¸ìŠ¤í„´ìŠ¤ ì•ˆì— ìˆìŒ)

â–¶ï¸ SQL Work Areas (SQL ì‘ì—… ì˜ì—­) : 

- Soft Merge Join
- Hash Join
- SORT OPERATION
    - ORDER BY
    - ì§‘í•© ì—°ì‚°ì(UNION ALL ì œì™¸í•œ ëª¨ë“  ì§‘í•© ì—°ì‚°ì)
    - GROUP BY ( 9ië²„ì „ ì´ì „, ì´í›„ì—ëŠ” Hash ì˜ì—­ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.)
    - UNIQUE, DISTINCT í‚¤ì›Œë“œë„ ì´ì „ì—ëŠ” sort operation , 9iì˜ r2ë²„ì „ì—ì„œ Hashë¡œ ë°”ë€œ
    - ê°ì²´ ìƒì„± ì¤‘ ì¸ë±ìŠ¤ ìƒì„±(primary key, index key)
    - í†µê³„ ìˆ˜ì§‘.
- Sort Merge Join

## ì¸ìŠ¤í„´ìŠ¤ì™€ ë°ì´í„°ë² ì´ìŠ¤ Startup Sequence

![image.png](/assets/20250623/21.png)

**ORACLE DATABASE ì‹œì‘ : startup**

```bash
SYS@ora19c> startup
```

![image.png](/assets/20250623/22.png)

 **instance ì‹œì‘ : nomount**

1. **SGA(System Global Area) ì˜ì—­**
2. **BackGround Process ìƒì„±**
3. **ì´ˆê¸° íŒŒë¼ë¯¸í„° íŒŒì¼ ì—´ê¸°** 
    1. **spfile(server parameter file) , spfile<SID>.ora    #sid = instance_name**
    2. **pfile(í…ìŠ¤íŠ¸ ì´ˆê¸° íŒŒë¼ë¯¸í„° íŒŒì¼) , init<SID>.ora**
    3. ìœ„ì¹˜ : $ORACLE_HOME/dbs
    
    ```bash
    # ë…¼ë¦¬ì  ìœ„ì¹˜
    cd $ORACLE_HOME/dbs
    
    # ì°¸ê³  : init.ora -> sample file 
    
    # spfile (ë°”ì´ë„ˆë¦¬ í˜•ì‹)
    cat spfileora19c.ora
    vi spfileora19c.ora   # ë°”ì´ë„ˆë¦¬ í˜•ì‹ì´ë¼ ìˆ˜ì • x ì¡°ì‹¬í•´ì•¼ í•œë‹¤.
    ```
    
    ![image.png](/assets/20250623/23.png)
    
    - nomount ë‹¨ê³„ì—ì„œ ì œì¼ ë¨¼ì € ë³´ëŠ” íŒŒì¼ì´ spfile<SID>.oraë¥¼ ì°¾ëŠ”ë° ì—†ìœ¼ë©´ init<SID>.oraë¥¼ ì°¾ëŠ”ë‹¤. ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ

![cat spfileora19c.ora](/assets/20250623/24.png)
cat spfileora19c.ora

ğŸ“ Contro file ì¤‘ìš”í•´ì„œ ì´ì¤‘í™” í•´ë†“ìŒ

â–¶ï¸ **startupì‹œì— ì–´ë–¤ ì´ˆê¸° íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ì„œ ì‹œì‘í–ˆëŠ”ì§€ ì²´í¬?**

```bash
SYS@ora19c> show parameter spfile

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
spfile                               string      /u01/app/oracle/product/19.3.0
                                                 /dbhome_1/dbs/spfileora19c.ora

# ë°±ì—…
# spfileë¥¼ ì´ìš©í•´ì„œ pfileì„ ë§Œë“ ë‹¤.
SYS@ora19c> create pfile from spfile;

```

ğŸ“ pfile  : í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ë˜ì–´ìˆìŒ

```bash

[oracle@oracle dbhome_1]$ cd dbs
[oracle@oracle dbs]$ ls
hc_ora19c.dat  init.ora  initora19c.ora  lkORA19C  orapwora19c  spfileora19c.ora
[oracle@oracle dbs]$ mv spfileora19c.ora spfileora19c.bak
[oracle@oracle dbs]$ ls
hc_ora19c.dat  init.ora  initora19c.ora  lkORA19C  orapwora19c  spfileora19c.bak

# spfileora19c.bakìœ¼ë¡œ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì— spfile ì°¾ì„ ìˆ˜ ì—†ì–´ init.ora (pfile) ë¡œ ì ‘ê·¼í•œë‹¤.
# ë°ì´í„°ë² ì´ìŠ¤ ì‹œì‘ì‹œì— pfileë¡œ ì‹œì‘í•œ ë°ì´í„°ë² ì´ìŠ¤ì¸ì§€, spfileë¡œ ì‹œì‘ëœ ë°ì´í„°ë² ì´ìŠ¤ì¸ì§€ ì²´í¬
SYS@ora19c> show parameter spfile

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
spfile                               string

# VALUE ê°’ì´ nullì´ë©´ pfileë¡œ ì‹œì‘í•œ ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤.

SYS@ora19c> show parameter

# ì›ë˜ëŒ€ë¡œ ë˜ëŒë¦¼
[oracle@oracle dbs]$ mv spfileora19c.bak spfileora19c.ora

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
spfile                               string      /u01/app/oracle/product/19.3.0
                                                 /dbhome_1/dbs/spfileora19c.ora

```

**alert<SID>.log, trace file ì—´ë¦°ë‹¤. : nomount**

```bash
[oracle@oracle dbs]$ cd $ORACLE_BASE/diag/rdbms**/DB_NAME/INSTANCE_NAME**/trace
```

â–¶ï¸ **nomount ë‹¨ê³„ì—ì„œ ì˜¤ë¼í´ ì‘ì—…í•˜ëŠ” ì¼**

- ë°ì´í„° ë² ì´ìŠ¤ ìƒì„±
- **control file ì¬ìƒì„±**
- íŠ¹ì • ë°±ì—…, ë³µêµ¬

**Control file ì—´ê¸° : mount**

- íŒŒë¼ë¯¸í„° íŒŒì¼ì—ì„œ ì§€ì •ëœ ì»¨íŠ¸ë¡¤ íŒŒì¼ ìœ„ì¹˜ë¥¼ ì°¾ì•„ì„œ ì—´ê¸°

```bash
SYS@ora19c> show parameter control_files

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
control_files                        string      /u01/app/oracle/oradata/ORA19C
                                                 /control01.ctl, /u01/app/oracl
                                                 e/fast_recovery_area/ORA19C/co
                                                 ntrol02.ctl

```

```bash
-- SQL Developer > oracle ìœ ì € 
-- control file ì •ë³´
select * from v$instance;
select * from v$database;
select * from v$datafile;
select * from v$logfile;   -- recovery ë¥¼ ìœ„í•œ ê²ƒ.
```

![select * from v$database; ì˜ CHECKPOINT_CHANGE : ë§ˆì§€ë§‰ SCN (ì»¤ë°‹) ë²ˆí˜¸](/assets/20250623/25.png)

select * from v$database; ì˜ CHECKPOINT_CHANGE : ë§ˆì§€ë§‰ SCN (ì»¤ë°‹) ë²ˆí˜¸

![image.png](/assets/20250623/26.png)

![REDO LOG](/assets/20250623/27.png)
REDO LOG

â–¶ï¸ mount ë‹¨ê³„ì—ì„œ ì˜¤ë¼í´ ì‘ì—…í•˜ëŠ” ì¼

- ë°ì´í„° íŒŒì¼ ì´ë¦„ ë°”ê¾¸ê¸°(ë°ì´í„° íŒŒì¼ ì´ê´€ì‘ì—…)
- NOARCHIVELOG MODEë¥¼ ARCHIVELOG MODEë¡œ ë°”ê¾¸ëŠ” ì‘ì—…
- full database recovery
- rmanì„ ì´ìš©í•´ì„œ close backup í•  ë•Œ

**data file, redo log file ì—´ê¸° : open**

- ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¼ê´€ì„± ê²€ì‚¬ë¥¼ í•œë‹¤. í•„ìš”í•œ ê²½ìš° SMON ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ê°€ INSTANCE RECOVERYë¥¼ ì‹œì‘í•œë‹¤.

```bash
select status from v$instance;

1) **shutdown immediate**  

/*

1) 
Database closed.
Database dismounted.
staORACLE instance shut down.   

*/

2) **startup nomount**

/*

ORACLE instance started.

Total System Global Area  713027608 bytes
Fixed Size                  8900632 bytes
Variable Size             511705088 bytes
Database Buffers          184549376 bytes
Redo Buffers                7872512 bytes

*/

3) **alter database mount;**

# Database altered.
****
4) **alter database open;**

****# Database altered.

5) **open_mode ì²´í¬í•´ë³´ê¸°**
select name, open_mode from v$database;
```

![image.png](/assets/20250623/28.png)

â–¶ï¸ READ WRITE modeëŠ” íŠ¸ëœì­ì…˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

ğŸ“ **ë°ì´í„°ë² ì´ìŠ¤ ì½ê¸° ëª¨ë“œ (READ ONLY)**

- íŠ¸ëœì­ì…˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤. ë‹¨ SELECTë§Œ ê°€ëŠ¥í•˜ë‹¤.

```bash
SYS@ora19c> shutdown immediate
SYS@ora19c> startup open read only

/*
Total System Global Area  713027608 bytes
Fixed Size                  8900632 bytes
Variable Size             511705088 bytes
Database Buffers          184549376 bytes
Redo Buffers                7872512 bytes
Database mounted.
Database opened.   
*/

SYS@ora19c> select name, open_mode from v$database;

NAME      OPEN_MODE
--------- --------------------
ORA19C    READ ONLY

```

```bash
1) DB ë‚´ë¦¬ê¸°
shutdown immediate

2) startup <- ê¸°ë³¸ê°’ open read write 
startup
```