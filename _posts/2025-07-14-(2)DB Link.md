---
title: "[56ì¼ì°¨] DB Link"
excerpt: "ì•„ì´í‹°ìœŒ 0714_(2)"
categories:
      - ORACLE19c
tags:
      - ORACLE19c
      - TIL
last-modified-at: 2025-07-14T17:13
---

# DB Link

![image.png](/assets/20250714/6.png)

â–¶ï¸ **database link**

- ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ê°ì²´ì— ëŒ€í•´ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê°ì²´ì´ë‹¤.
- private database link :  create database link ì‹œìŠ¤í…œ ê¶Œí•œ
- public database link  :  create public database link ì‹œìŠ¤í…œ ê¶Œ

ğŸ“ Ora19C DB

```sql
-- â–¶ï¸ sys session
select * from dba_users where username = 'INSA';  -- insaë€ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
DROP USER insa CASCADE;  -- ìˆìœ¼ë©´ ì‚­ì œ 

-- ìƒˆë¡­ê²Œ insa ìœ ì € ìƒì„±
CREATE USER insa
IDENTIFIED BY oracle
DEFAULT TABLESPACE users
TEMPORARY TABLESPACE temp
QUOTA unlimited ON users;

-- í™•ì¸ 
SELECT * FROM dba_users WHERE username = 'INSA';
SELECT * FROM dba_ts_quotas WHERE username = 'INSA';

GRANT CREATE SESSION, CREATE TABLE, SELECT ANY TABLE TO insa;

SELECT * FROM dba_sys_privs WHERE grantee = 'INSA';

-- â–¶ï¸ insa ì„¸ì…˜

INSA@ora19c> CREATE TABLE emp AS SELECT * FROM  hr.employees;

Table created.

INSA@ora19c> SELECT count(*) FROM emp;

  COUNT(*)
----------
       107
       
```

ğŸ“ Xe DB

C:\oraclexe\app\oracle\product\11.2.0\server\network\ADMIN ê²½ë¡œì˜ tnsnames.ora ì— ì´ê±° ì¶”ê°€ 

```sql
ORA19C =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.56.110)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ora19c)
    )
  )
 
```

```sql
-- â–¶ï¸ cmd 
**C:\Windows\System32>tnsping ora19c**

TNS Ping Utility for 64-bit Windows: Version 11.2.0.2.0 - Production on 14-7ì›” -2025 14:06:07

Copyright (c) 1997, 2014, Oracle.  All rights reserved.

Used parameter files:
C:\oraclexe\app\oracle\product\11.2.0\server\network\admin\sqlnet.ora

Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.56.110)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ora19c)))
OK (10 msec)

**C:\Windows\System32>sqlplus / as sysdba**

SQL*Plus: Release 11.2.0.2.0 Production on ì›” 7ì›” 14 14:09:21 2025

Copyright (c) 1982, 2014, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production

SYS@XE> select name from v$database;

NAME
------------------
XE
```

ğŸ“ Public database link ìƒì„±

íŠ¹ì • DBë¥¼ ë°”ë¼ë³´ê³  ì‹¶ì€ DBìª½ì— DB Linkë¥¼ ìƒì„±í•œë‹¤.

```sql
-- â–¶ï¸ XE DBì˜ sys session 

SYS@XE> CREATE PUBLIC DATABASE LINK ora19c_insa
  2  CONNECT TO insa IDENTIFIED BY oracle  
  3  USING 'ora19c';  -- tns ì´ë¦„

Database link created.

SYS@XE> select * from dba_db_links;
```

![image.png](/assets/20250714/7.png)

```sql
SYS@XE> conn hr/hr
Connected.

select * from all_db_links;

-- XE DBì—ì„œ Ora19c DBì˜ emp ì¡°íšŒ .
HR@XE> select * from emp@ora19c_insa; -- ì¡°íšŒ ë¨

-- ì¡°ì¸í•´ë³´ê¸° 
HR@XE> select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from emp@ora19c_insa e, hr.departments d
where e.department_id = d.department_id;
```

ğŸ“ public database link ì‚­ì œ

```sql
HR@XE> conn / as sysdba
Connected.
SYS@XE> drop public database link ora19c_insa;

Database link dropped.
```

ğŸ“ ì˜ ì‚­ì œëëŠ”ì§€ í™•ì¸

```sql
SYS@XE> conn hr/hr
Connected.
HR@XE> select * from emp@ora19c_insa;
select * from emp@ora19c_insa
                  *
ERROR at line 1:
ORA-02019: connection description for remote database not found

lsnrctl status
```

ğŸ“ë¦¬ìŠ¤ë„ˆ ìƒíƒœ í™•ì¸

```sql
C:\Windows\System32>lsnrctl status

LSNRCTL for 64-bit Windows: Version 11.2.0.2.0 - Production on 14-7ì›” -2025 14:51:32

Copyright (c) 1991, 2014, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for 64-bit Windows: Version 11.2.0.2.0 - Production
Start Date                02-7ì›” -2025 13:02:26
Uptime                    12 days 1 hr. 49 min. 6 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Default Service           XE
Listener Parameter File   C:\oraclexe\app\oracle\product\11.2.0\server\network\admin\listener.ora
Listener Log File         C:\oraclexe\app\oracle\diag\tnslsnr\DESKTOP-GL9S3I6\listener\alert\log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=DESKTOP-GL9S3I6)(PORT=1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=DESKTOP-GL9S3I6)(PORT=8080))(Presentation=HTTP)(Session=RAW))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "PLSExtProc" has 1 instance(s).
  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "XEXDB" has 1 instance(s).
  Instance "xe", status READY, has 1 handler(s) for this service...
Service "xe" has 1 instance(s).
  Instance "xe", status READY, has 1 handler(s) for this service...
The command completed successfully
```

ğŸ“ cmdì˜ ë¦¬ìŠ¤ë„ˆë„ ë„ìš°ë©´ ìš©ëŸ‰ ë¶€ë‹´ì¼ ë•Œ

**ì„œë¹„ìŠ¤ â†’ OracleService â†’ ì†ì„± â†’ ìˆ˜ë™**

![image.png](/assets/20250714/8.png)

ğŸ“ Ora19cì—ì„œ XE DB í…Œì´ë¸” ì¡°

```sql
-- cmd
ipconfig

-- linux
[oracle@oracle ~]$ ping -c 3 192.168.32.7
PING 192.168.32.7 (192.168.32.7) 56(84) bytes of data.
64 bytes from 192.168.32.7: icmp_seq=1 ttl=255 time=0.735 ms
64 bytes from 192.168.32.7: icmp_seq=2 ttl=255 time=0.913 ms
64 bytes from 192.168.32.7: icmp_seq=3 ttl=255 time=1.03 ms

--- 192.168.32.7 ping statistics ---

cd $ORACLE_HOME/network/admin
vi tnsnames.ora ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì • 

/*
ora19c =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ora19c)
    )
  )

LISTENER_ORA19C =
  (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1522))

L02 =
  (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1523))

xe_t =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = **192.168.32.7**)(PORT = 1521))
																	    -----> cmd : ipconfig ip
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = xe)
    )
  )

*/

```

```sql
sqlplus hr/hr@xe_t  -- í™•ì¸

--â–¶ï¸ ora19c sys session
-- private database link ìƒì„±í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ ê¶Œí•œ.
GRANT CREATE DATABASE LINK TO insa;
SELECT * FROM dba_sys_privs WHERE grantee = 'INSA';

-- ë‚´ê°€ ë°›ì€ ì‹œìŠ¤í…œ ê¶Œí•œ ì¡°íšŒ
select * from user_sys_privs;

-- private database link ìƒì„±
CREATE DATABASE link xe_hr
CONNECT TO hr identified BY hr
USING 'xe_t';

SELECT * FROM user_db_links;

| DB\_LINK | USERNAME | PASSWORD | HOST  | CREATED  | HIDDEN | SHARD\_INTERNAL | VALID | INTRA\_CDB |
| -------- | -------- | -------- | ----- | -------- | ------ | --------------- | ----- | ---------- |
| XE\_HR   | HR       | (null)   | xe\_t | 25/07/14 | NO     | NO              | YES   | NO         |

-- â–¶ï¸ ora19c insa session
select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from employees@xe_hr e, departments@xe_hr d
where e.department_id = d.department_id;

-- í…Œì´ë¸” ìƒì„±
create table insa_table
as
select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from employees@xe_hr e, departments@xe_hr d
where e.department_id = d.department_id;

CREATE DATABASE link xe_hr
CONNECT TO hr identified BY hr
USING 'xe_t';  -- TNS ì´ë¦„ 

SELECT * FROM user_db_links;

select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from employees@xe_hr e, departments@xe_hr d
where e.department_id = d.department_id;

-- í…Œì´ë¸” ìƒì„±
create table insa_table
as
select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from employees@xe_hr e, departments@xe_hr d
where e.department_id = d.department_id;

select count(*) from insa_table;   -- 106

truncate table insa_table;

select count(*) from insa_table;  -- 0

insert into insa_table
-- í…Œì´ë¸” ìƒì„±
select e.employee_id, e.last_name, e.salary, e.department_id, d.department_name
from employees@xe_hr e, departments@xe_hr d
where e.department_id = d.department_id;

commit;

select count(*) from insa_table;   -- 106

-- private database link ì‚­ì œ
DROP DATABASE LINK xe_hr;
select * from user_db_links;
```

ğŸ“ ì´ë ‡ê²Œë„ private database link ìƒì„±

```sql
-- ì´ë ‡ê²Œ ê¸°ì…í•´ë„ ëœë‹¤.
CREATE DATABASE link xe_hr
CONNECT TO hr identified BY hr
USING ' (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.32.7)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = xe)
    )
  )';
```