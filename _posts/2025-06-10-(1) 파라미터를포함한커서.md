---
title: "[34ì¼ì°¨] íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ cursor "
excerpt: "ì•„ì´í‹°ìœŒ 0610_(1) "
categories:
      - ORACLE11g
tags:
      - ORACLE11g
      - TIL
last-modified-at: 2025-06-10T18:06
---

# íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ cursor

â–¶ï¸ ì‹¤í–‰ ê³„íš sharing í•˜ì§€  ëª»í•¨. (ìƒìˆ˜ê°’ :ë¶„ë¦¬í•˜ëŠ” ê²½ìš° ì‚¬ìš©)

```sql
DECLARE
	# ëª…ì‹œì  ì»¤ì„œ
  CURSOR parm_cur_80 IS
     SELECT employee_id, last_name, job_id
     FROM hr.employees
     WHERE department_id = 80
     AND job_id = 'SA_MAN';
     
   CURSOR parm_cur_50 IS
     SELECT employee_id, last_name, job_id
     FROM hr.employees
     WHERE department_id = 50
     AND job_id = 'ST_MAN';
     
   v_rec1 parm_cur_80%rowtype;
   
BEGIN
    OPEN parm_cur_80;
    
    LOOP
        FETCH parm_cur_80 INTO v_rec1;
        EXIT WHEN parm_cur_80%NOTFOUND;
        dbms_output.put_line(v_rec1.employee_id||' '||v_rec1.last_name||' '||v_rec1.job_id);
    END LOOP;
    
    CLOSE parm_cur_80;
    
    FOR v_rec2 IN parm_cur_50 LOOP
        dbms_output.put_line(v_rec2.employee_id||' '||v_rec2.last_name||' '||v_rec2.job_id);
    END LOOP;
END;
/
```

â–¶ï¸ íŒŒë¼ë¯¸í„° ì´ìš©  : ëª…ì‹œì  ì»¤ì„œì—ì„œ **ì‹¤í–‰ ê³„íšì„ sharing í•˜ê¸° ìœ„í•´ì„œ**

ğŸ“ **ì£¼ì˜ì‚¬í•­ì€ ê°’ì˜ ë¶„í¬ë„ì— ë”°ë¼ ì‹¤í–‰ê³„íšì„ ë¶„ë¦¬í•´ì•¼ í•  ë•ŒëŠ” ìƒìˆ˜ê°’ìœ¼ë¡œ ê³ ì •í•˜ëŠ” ê²Œ ë” ì¢‹ì„ ìˆ˜ ìˆë‹¤.**

- í˜•ì‹ ë§¤ê°œë³€ìˆ˜
    - í˜•ì‹ ë§¤ê°œë³€ìˆ˜ ì„ ì–¸ì‹œì— ë°ì´í„° íƒ€ì…ë§Œ ì‚¬ìš©í•œë‹¤. (SIZEë¥¼ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ë°œìƒ)
- ì‹¤ì œ ë§¤ê°œë³€ìˆ˜
    - ì‹¤ì œ ë§¤ê°œë³€ìˆ˜ëŠ”  OPEN ìˆ˜í–‰í•  ë•Œ í˜•ì‹ ë§¤ê°œ ë³€ìˆ˜ì— ëŒ€ì‘ë˜ê²Œ ì…ë ¥í•œë‹¤.

```sql
# ëª…ì‹œì  ì»¤ì„œ
  CURSOR parm_cur(p_id number, p_job varchar2) IS
                  -----------> **í˜•ì‹ ë§¤ê°œë³€ìˆ˜ : íƒ€ì…ë§Œ ê¸°ì…! â ì‚¬ì´ì¦ˆ ê¸°ì…í•˜ë©´ ì•ˆë¨.** 
     SELECT employee_id, last_name, job_id
     FROM hr.employees
     WHERE department_id = p_id
     AND job_id = p_job;

v_rec1 parm_cur_80%rowtype;
   
BEGIN
    OPEN parm_cur(80,'SA_MAN');
    -----------> **ì‹¤ì œ ë§¤ê°œë³€ìˆ˜ : í˜•ì‹ ë§¤ê°œë³€ìˆ˜ì™€ ëŒ€ì‘ë˜ê²Œ ê¸°ìˆ í•œë‹¤.**
    LOOP
        FETCH parm_cur INTO v_rec1;
        EXIT WHEN parm_cur%NOTFOUND;
        dbms_output.put_line(v_rec1.employee_id||' '||v_rec1.last_name||' '||v_rec1.job_id);
    END LOOP;
    
    CLOSE parm_cur_80;
    
    FOR v_rec2 IN parm_cur(50,'ST_MAN') LOOP
        dbms_output.put_line(v_rec2.employee_id||' '||v_rec2.last_name||' '||v_rec2.job_id);
    END LOOP;
END;     
     
```