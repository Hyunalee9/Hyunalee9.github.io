---
title: "[71ì¼ì°¨] rman ì•”í˜¸í™” ë°±ì—… "
excerpt: "ì•„ì´í‹°ìœŒ 0805"
categories:
      - ORACLE19c
tags:
      - ORACLE19c
      - TIL
last-modified-at: 2025-08-05T21:08
---

# rman ì•”í˜¸í™” ë°±ì—…

â–¶ï¸ rman ì•”í˜¸í™” ë°±ì—…

- ë””ìŠ¤í¬ì— ì•”í˜¸ë˜ëŠ” ë°±ì—… : Oracle Advanced Security ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”ë¥¼ ì œê³µí•œë‹¤.
- í…Œì´í”„ì— ì•”í˜¸ë˜ëŠ” ë°±ì—… : OSB (Oracle Secure Backup)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”ë¥¼ ì œê³µí•˜ëŠ” ê²½ìš° OSBê°€ ì•”í˜¸í™” í‚¤ë¥¼ ê´€ë¦¬í•œë‹¤.

â–¶ï¸ rman ì•”í˜¸í™” ë°±ì—…ì€ ì„¸ ê°€ì§€ ì•”í˜¸í™” ëª¨ë“œë¥¼ ì§€ì›í•œë‹¤.

- TDE(Transparent Data Encrytion) í‚¤ë¥¼ ì‚¬ìš©
- ì•”í˜¸í™” ëª¨ë“œ : RMAN ìŠ¤í¬ë¦½íŠ¸ì—ì„œ SET ENCRYPTION ON INDENTIFIED BY password ONLY
- ì´ì¤‘ ëª¨ë“œ : RMAN ìŠ¤í¬ë¦½íŠ¸ì—ì„œ SET ENCRYPTION ON INDENTIFIED BY password

```sql
select * from v$encryption_wallet;

/*

WRL_TYPE
--------------------
WRL_PARAMETER
--------------------------------------------------------------------------------
STATUS                         WALLET_TYPE          WALLET_OR KEYSTORE FULLY_BAC
------------------------------ -------------------- --------- -------- ---------
    CON_ID
----------
FILE
/home/oracle/wallet/tde/
CLOSED                         UNKNOWN              SINGLE    NONE     UNDEFINED
         0

*/

>rman
list copy 
list backup;
show all;
```

â–¶ï¸

```sql
-- TDE ë°±ì—…
-- ì•”í˜¸í™” ë¹„í™œì„±í™”
CONFIGURE ENCRYPTION FOR DATABASE OFF;
-- ì•”í˜¸í™” í™œì„±í™”(ì§€ì†ì ìœ¼ë¡œ ì‚¬ìš©)
CONFIGURE ENCRYPTION FOR DATABASE ON; 
-- ì•”í˜¸í™” í™œì„±í™” í˜„ì¬ SESSIONì—ì„œë§Œ ì‚¬ìš©
SET ENCRYPTION ON;   -- ì¼ì‹œì 

list backup;
backup database;

-- í‚¤ìŠ¤í† ì–´ close
administer key management set keystore close identified by "oracle1234"
select * from v$encrytion_wallet;
```

â–¶ï¸ ì¥ì•  ë°œìƒ

```sql
! rm /u01/app/oracle/oradata/ORA19C/users01.dbf
```

â–¶ï¸ ë³µêµ¬ ì‘ì—… 

```sql
alter database datafile '/u01/app/oracle/oradata/ORA19C/users01.dbf' offline;

-- keystore close ë˜ì–´ ìˆìœ¼ë©´ ë°±ì—…ë³¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
restore datafile 7;

administer key management set keystore open identified by "oracle1234"
select * from v$encrytion_wallet;
restore datafile 7;
recover datafile 7;
alter database datafile 7 online;

```

â–¶ï¸ ì´ì¤‘ ëª¨ë“œ (Dual Mode)

- TDE(Transparent Data Encryption) ì™€ ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ ì•”í˜¸í™”ë¥¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.
- ì´ì¤‘ ëª¨ë“œë¡œ ë°±ì—…ë³¸ì„ ì´ìš©í•´ì„œ ë³µêµ¬ ì‘ì—… ì‹œì— TDE ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```sql

CONFIGURE ENCRYPTION FOR DATABASE OFF;

-- í™œì„±í™”
CONFIGURE ENCRYPTION FOR DATABASE ON;
SET ENCRYPTION ON IDENTIFIED BY itwill;

delete backup;
backup database;
list backup;
```

â–¶ï¸ close

```sql
-- í‚¤ìŠ¤í† ì–´ close (sys)
administer key management set keystore close identified by "oracle1234"
select * from v$encrytion_wallet;
```

â–¶ï¸ ë³µêµ¬ ì‘ì—…

```sql
alter database datafile '/u01/app/oracle/oradata/ORA19C/users01.dbf' offline;

-- keystore close ë˜ì–´ ìˆìœ¼ë©´ ë°±ì—…ë³¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
restore datafile 7;

administer key management set keystore open identified by "oracle1234"
select * from v$encrytion_wallet;
restore datafile 7;
recover datafile 7;
alter database datafile 7 online;
```

â–¶ï¸ open

```sql
administer key management set keystore open identified by "itwll"
select * from v$envryption_wallet;
alter database datafile 7 online;
```

â–¶ï¸ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì´ìš©í•´ì„œ decryption

```sql
SET DECRYPTION IDENTIFIED BY ITWILL:
restore datafile 7;
recover datafile 7;
```

â–¶ï¸ ì•”í˜¸í™” ë°±ì—…ë³¸ ì²´í¬

```sql
select handle, tag, encrypted from v$backup_piece where encrypted = 'YES';
```

â–¶ï¸ ë§ˆì§€ë§‰ ì‹¤ìŠµ

```sql
-- ì„¸ì…˜ ëŠê³  ë‚˜ê°”ë‹¤ ë“¤ì–´ì˜¤ê¸°
select * from v$encryption_wallet;
```

â–¶ï¸ password encryted backup

- RMAN SESSION ë°±ì—… ìˆ˜í–‰í•˜ëŠ” ì„¸ì…˜ì—ì„œë§Œ ì‚¬ìš©

```sql
SET ENCRYTION ON IDENTIFIED BY oracle ONLY;
backup as compressed backupset database; -- ì•”í˜¸í™” , ì••ì¶•
select handle, tag, encrypted from v$backup_piece where encrypted = 'YES';
```

â–¶ï¸ ì¥ì•  ë°œìƒ

```sql
! rm /u01/app/oracle/oradata/ORA19C/users01.dbf
```

â–¶ï¸ offline

```sql
alter database datafile '/u01/app/oracle/oradata/ORA19C/users01.dbf' offline;
```

â–¶ï¸ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì´ìš©í•´ì„œ decrytion

```sql
SET DECRYPTION IDENTIFIED BY oracle;
```

â–¶ï¸ online

```sql
alter database datafile 7 online;
```

ğŸ“ ì»¬ëŸ¼ ì•”í˜¸ 

```sql
create table hr.emp tablespace users select * from hr.employees;
alter table hr.emp modify salary encrypt;
select * from dba_encrypted_columns where table_name ='EMP' and owner = 'HR';

-- ì»¬ëŸ¼ ì•”í˜¸í™”ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SALTê°€ ì¶”ê°€ë˜ì–´ ìˆë‹¤.
-- SALT : ì•”í˜¸ë¬¸ì— ë¬¸ìì—´ì„ ì¶”ê°€í•´ì„œ ì‰½ê²Œ í•´ë…í•˜ì§€ ëª»í•˜ê²Œ..
```

![image.png](/assets/20250805/1.png)

â–¶ï¸ ì•”í˜¸í™” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„± ì‹œ ì£¼ì˜ì‚¬í•­

- salt ë˜ì–´ ìˆìœ¼ë©´ ì¸ë±ìŠ¤ ìƒì„±í•  ìˆ˜ ì—†ë‹¤.

```sql
alter table hr.emp modify salary encrypt no salt;
create index hr.emp_sal_idx on hr.emp(salary) tablespace users;
select * from dba_encrypted_columns where table_name = 'EMP' and owner = 'HR';
```

â–¶ï¸ ì»¨íŠ¸ë¡¤ íŒŒì¼ì´ ê¹¨ì§€ë©´ ë°±ì—… ì •ë³´ê°€ ìœ ì‹¤ëœë‹¤. 

ğŸ“ Recovery Catalog

- **RMAN repository data** ëŠ” í•­ìƒ target databaseì˜ control fileì— ì €ì¥ëœë‹¤.
- **Recovery Catalog**ëŠ” ë³„ë„ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ë°±ì—… ì •ë³´ë¥¼ ë³´ê´€í•¨ìœ¼ë¡œ control fileì´ ì†ì‹¤ë˜ì—ˆì„ ë•Œ ìœ ìš©í•˜ë‹¤.
- ì»¨íŠ¸ë¡¤ íŒŒì¼ ê¸°ë°˜ repositoryë³´ë‹¤ ì˜¤ë« ë™ì•ˆ ë°±ì—… ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
- ë‹¨ì¼ Recovery Catalogì— ì—¬ëŸ¬ target databaseì˜ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
- control file ë°ì´í„° ë³µì œ
- ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ ì €ì¥

ğŸ“ encryption ì§€ìš°ëŠ” ì‘ì—…

```sql
shutdown immediate;
startup 
! rm -r wallet 
```

## í´ë¡  ë””ë¹„

ğŸ“ ìƒˆë¡œìš´ ë””ë ‰í† ë¦¬ ìƒì„± í›„ ë°±ì—…

```sql
cd rcdb
pwd
backup as compressed backupset format '/home/oracle/rcdv/%U_%T' database include current controlfile;
```

ğŸ“

```sql
-- ë¦¬ë‘ ë¡œê·¸
SELECT a.group#, b.sequence#, a.member, b.status, b.first_change#, b.first_time, b.next_change#, b.next_time
FROM v$logfile a, v$log b
WHERE a.group# = b.group#
ORDER BY b.group#;

alter system archive log current;
-- ì•„ì¹´ì´ë¸Œ ì •ë³´ ì²´í¬ 
select sequence#, name, first_change#, next_change# from v$archived_log;
! cp -v ì•„ì¹´ì´ë¸Œ ë¦¬ë‘ íŒŒì¼ /home/oracle/rcdb
! ls -l /home/oracle/rcdb

```

ğŸ“pfile

```sql
create pfile='/home/oracle/rcdb/initrcdb.ora' from spfile;

vi initrcdb.ora

*.compatible='19.0.0'
*.control_files='/home/oracle/rcdb/control01.ctl'
*.db_name='rcdb'
*.log_archive_dest_1='location=/home/oracle/rcdb mandatory'
*.log_archive_format='arch_%t_%s_%r.arc'
*.undo_tablespace='UNDOTBS1'
db_file_name_convert=('/u01/app/oracle/oradata/ORA19C/','/home/oracle/rcdb/')
log_file_name_convert=('/u01/app/oracle/oradata/ORA19C/','/home/oracle/rcdb/')

cat initrcdb.ora
```

ğŸ“ clone kill ì‹œí‚¤ëŠ” ì‘ì—…

```sql
ps -ef | grep clone
kill -9 ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ì„œ ë²ˆí˜¸
echo $ORACLE_HOME
. oraenv
export ORACLE_SID=rcdb
ORACLE_SID = [oracle] ? rcdb
ORACLE_HOME = [/home/oracle] ? /u01/app/oracle/product/19.3.0/dbhome_1
The Oracle base remains unchanged with value /u01/app/oracle

startup pfile=/home/oracle/rcdb/initrcdb.ora nomount;
select instance_name, status from v$instance;
exit
rman auxiliary /
```

ğŸ“ ì‘ì—…í˜•

```sql
run {
	duplicate database to 'rcdb'
	pfile='/home/oracle/rcdb/initrcdb.ora'
	backup location '/home/oracle/rcdb';
}
```

â–¶ï¸ 

```sql
select instance_name, status from v$instance;
select dbid, name, log_mode from v$database;
```

â–¶ï¸ recovery catalog ì •ë³´ê°€ ì €ì¥ë˜ëŠ” í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìƒì„± 

â–¶ï¸ rcdb

```sql
create tablespace rc_tbs datafile; '/home/oracle/rcdb/rc_tbs01.dbf' size 10m autoextend on;

select file_id, tablespace_name, file_name, bytes, maxbytes, autoextensible from dba_data_files;
```

â–¶ï¸ recovery catalog ì†Œìœ ì ìƒì„±

```sql
create user re_user
identified by oracle
default tablespace rc_tbs
temporary tablespace temp
quota unlimited on rc_tbs;
```

â–¶ï¸ recovery catalog ì†Œìœ ìì—ê²Œ recovery_catalog_owner ë¡¤ì„ ë¶€ì—¬

```sql
grant connect, resource, recovery_catalog_owner to rc_user; 
-- í™•ì¸.
select * from dba_role_privs where grantee = 'RC_USER';
```

â–¶ï¸ ìœ ì € ì ‘ì†

```sql
conn rc_user/oracle
select * from session_roles;
select * from role_sys_privs;
select * from role_tab_privs;
exit

. oraenv
>
>
su -
-- root ìœ ì €
vi /etc/oratab
G
i
yy
p

```

![image.png](/assets/20250805/2.png)

```sql
:wq
cat etc/oratab
exit
. oraenv
rcdb
echo $ORACLE_HOME
rman target /
exit
rman catalog rc_user/oracle
```

â–¶ï¸ ì¹´íƒˆë¡œê·¸ ìƒì„±

```sql
rman> create catalog;
exit

-- ì°½ í•˜ë‚˜ ë„ìš°ê¸°
```

ğŸ“ target database

```sql
. oraenv
-- ë„¤íŠ¸ì›Œí¬ ì„¸íŒ…

cd $ORACLE_HOME/diag/network/admin
ls
vi tnsname.ora

--> ì¶”ê°€
rcdb =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = rcdb)
    )
  )
  
  tnsping rcdb
  lsnrctl status
  lsnrctl start
  lsnrctl status
  
  -- ora19c
  . oraenv
  echo $ORACLE_SID
 rman target / catalog rc user/oracle@rcdb;
```

â–¶ï¸ ì¹´íƒˆë¡œê·¸ ë””ë¹„ì— ë“±ë¡ ì‘ì—…

```sql
echo $ORACLE_SID  
sqlplus rc_user/oracle
select * from rc_database;  -- ì •ë³´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.

-- recovery catalogì— target database ì •ë³´ë¥¼ ë“±ë¡í•œë‹¤.
register database;

-- rcdb
select * from rc_database;
select * from rc_database_incarnation;
select db_name, tablespace_name, name from rc_datafile;

/*

| DB\_NAME | TABLESPACE\_NAME | íŒŒì¼ ê²½ë¡œ                                      |
| -------- | ---------------- | ---------------------------------------------- |
| ORA19C   | SYSTEM           | `/u01/app/oracle/oradata/ORA19C/system01.dbf`  |
| ORA19C   | SYSAUX           | `/u01/app/oracle/oradata/ORA19C/sysaux01.dbf`  |
| ORA19C   | UNDOTBS1         | `/u01/app/oracle/oradata/ORA19C/undotbs01.dbf` |
| ORA19C   | USERS            | `/u01/app/oracle/oradata/ORA19C/users01.dbf`   |

*/

select * from rc_backup_piece;
-- target ìª½

list backup;

-- rcdb
select * from rc_backup_piece;

-- target
backup as compressed backupset database tag='tuesday';
list backup tag='tuesday';

-- rcdb
select * from rc_backup_piece;

-- ë°±ì—… ì •ì±…?
-- rcdb
select * from rc_backup_piece;
rm /u01/app/oracle/oradata/ORA19C/control01.ctl
startup
shutdown immediate;
rman target / catalog rc_user/oracle@rcdb
list failure;

/*

| Failure ID | Priority | Summary                                                                | ì˜ë¯¸                               |
| ---------- | -------- | ---------------------------------------------------------------------- | -------------------------------- |
| **10382**  | CRITICAL | Control file needs media recovery                                      | ì»¨íŠ¸ë¡¤ íŒŒì¼ì´ ì†ìƒë˜ì–´ ë³µêµ¬ í•„ìš”.              |
| **10362**  | CRITICAL | Control file `/u01/app/oracle/oradata/ORA19C/control01.ctl` is missing | ì œì–´ íŒŒì¼ì´ ì•„ì˜ˆ ì¡´ì¬í•˜ì§€ ì•ŠìŒ.               |
| **148**    | HIGH     | One or more non-system datafiles need media recovery                   | SYSTEMì´ ì•„ë‹Œ ì¼ë¶€ ë°ì´í„° íŒŒì¼ì´ ë¯¸ë””ì–´ ë³µêµ¬ í•„ìš”. |

*/

-- ì¹´íƒˆë¡œê·¸ ë””ë¹„ ë°±ì—… ì •ë³´ëŠ” ì‚¬ë¼ì§€ì§€ ì•Šì•˜ë‹¤.
-- ê¸°ì¡´
restore controlfile from autobackup;
restore controlfile from 'ì»¨íŠ¸ë¡¤ íŒŒì¼ ë°±ì—… ë¬¼ë¦¬ì  ê²½ë¡œ'

-- ì¹´íƒˆë¡œê·¸ ë””ë¹„
restore controlfile;
alter database mount;
recover database;  -- ë¦¬ë‘ ì •ë³´ ì ìš©  (ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ì„ ì´ìš©í•´ì„œ mount ì˜¬ë ¸ê¸° ë•Œë¬¸ì— SCN ë§ì¶”ëŠ” ì‘ì—…)
alter database open resetlogs;  -- í˜¹ì€ ì¬ìƒì„±í•˜ë©´ ëœë‹¤.
list incarnation;
```

â–¶ï¸ rcdb

```sql
select * from rc_database_incarnation;

-- ì €ì¥ë˜ì–´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
select * from rc_stored_script;

-- ì €ì¥ë˜ì–´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ í™•ì¸
select * from rc_stored_script_line;

exit;

-- target db
rman target / catalog rc_user/oracle@rcdb

-- ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
create script incr_0_backup {
		backup as compressed backupset incremental level 0 database include current controlfile;
		alter system archive log current;
}

-- í˜„ì¬ ìƒì„±ë˜ì–´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ ì´ë¦„
list script names;
print script incr_0_backup;

-- rcdb
-- ì €ì¥ë˜ì–´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
select * from rc_stored_script;
/*
| DB\_KEY | DB\_NAME | SCRIPT\_NAME    | SCRIPT\_COMMENT |
| ------- | -------- | --------------- | --------------- |
| 1       | ORA19C   | incr\_0\_backup | (ë¹„ì–´ ìˆìŒ)         |
*/

-- ì €ì¥ë˜ì–´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ í™•ì¸ 
select * from rc_stored_script_line;
/*
DB_KEY  SCRIPT_NAME     LINE TEXT
------- -------------------- ----------------------------------------------------------------
1       incr_0_backup   1    {
1       incr_0_backup   2    backup as compressed backupset incremental level 0 database
                               include current controlfile;
1       incr_0_backup   3    alter system archive log current;}
*/		
```

ğŸ“ target db

â–¶ï¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```sql
run {execute script incr_0_backup;}
```

â–¶ï¸ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •

```sql
replace script incr_0_backup {
	backup as compressed backupset incremental level 0 database include current controlfile;
	alter system arhive log current;
}

print script incr_0_backup;
```

â–¶ï¸ ìŠ¤í¬ë¦½íŠ¸ ì‚­ì œ

```sql
delete script incr_0_backup;
```

ğŸ“ target db

```sql
create tablespace insa_tbs datafile '/u01/app/oracle/oradata/ORA19C/insa_tbs01.dbf' size 5m;
```

ğŸ“ rcdb

```sql
select db_name, tablespace_name, name from rc_datafiles;
select DBINC_KEY, db_name, tablespace_name, name from rc_datafile;

/*

DBINC_KEY  DB_NAME   TABLESPACE_NAME   NAME
---------- --------- ----------------- -----------------------------------------------
2          ORA19C    SYSTEM            /u01/app/oracle/oradata/ORA19C/system01.dbf   -- ê³¼ê±° ì •ë³´
2          ORA19C    SYSAUX            /u01/app/oracle/oradata/ORA19C/sysaux01.dbf
2          ORA19C    UNDOTBS1          /u01/app/oracle/oradata/ORA19C/undotbs01.dbf
2          ORA19C    USERS             /u01/app/oracle/oradata/ORA19C/users01.dbf
334        ORA19C    SYSTEM            /u01/app/oracle/oradata/ORA19C/system01.dbf   -- í˜„ì¬ ì •ë³´
334        ORA19C    SYSAUX            /u01/app/oracle/oradata/ORA19C/sysaux01.dbf
334        ORA19C    UNDOTBS1          /u01/app/oracle/oradata/ORA19C/undotbs01.dbf
334        ORA19C    USERS             /u01/app/oracle/oradata/ORA19C/users01.dbf

*/
```

ğŸ“ ì¬ë™ê¸°í™” (resynchronize) 

- target ë°ì´í„°ë² ì´ìŠ¤ì— í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±, ì¶”ê°€, ì‚­ì œ
- target ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„° íŒŒì¼ ì¶”ê°€, ì‚­ì œ
- target ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„° íŒŒì¼ ì¬ë°°ì¹˜

```sql
rman target / catalog rc_user/oracle@rcdb
resync catalog -- ì¬ë™ê¸°
```

â–¶ï¸ target db

```sql
alter tablespace insa_tbs add datafile /u01/app/oracle/oradata/ORA19C/insa_tbs02.dbf' size 5m;
```

â–¶ï¸ rcdb

```sql
select DBINC_KEY, db_name, tablespace_name, name from rc_datafile;

report schema;
resync catalog;
select DBINC_KEY, db_name, tablespace_name, name from rc_datafile where dbinc_key = 334;

/*

DBINC_KEY  DB_NAME   TABLESPACE_NAME   NAME
---------- --------- ----------------- ---------------------------------------------------
334        ORA19C    SYSTEM            /u01/app/oracle/oradata/ORA19C/system01.dbf
334        ORA19C    SYSAUX            /u01/app/oracle/oradata/ORA19C/sysaux01.dbf
334        ORA19C    UNDOTBS1          /u01/app/oracle/oradata/ORA19C/undotbs01.dbf
334        ORA19C    USERS             /u01/app/oracle/oradata/ORA19C/users01.dbf
334        ORA19C    INSA_TBS          /u01/app/oracle/oradata/ORA19C/insa_tbs02.dbf
334        ORA19C    INSA_TBS          /u01/app/oracle/oradata/ORA19C/insa_tbs01.dbf

*/
```

â–¶ï¸ target db

```sql
drop tablespace insa_tbs including contents and datafiles;
resync catalog; --dropì´ ì˜ ë˜ì§€ ì•Šì•„ì„œ.
```

â–¶ï¸ catalog ì‚­ì œ

```sql
drop catalog;
-- Enter DROP CATALOG command again to confirm catalog removal
drop catalog; --ì§„ì§œ ì‚­ì œ

exit 
sqlplus rc_user/oracle

-- rc ìœ ì € 
select DBINC_KEY, db_name, tablespace_name, name from rc_datafile where dbinc_key = 334;
exit
rman target /

-- ì¹´íƒˆë¡œê·¸ ë””ë¹„ ì •ìƒì ìœ¼ë¡œ ì‚­ì œë¨.
/*
connected to target database: ORA19C (DBID=1257496535)
connected to recovery catalog database
*/
```