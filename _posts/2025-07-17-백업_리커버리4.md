---
title: "[59ì¼ì°¨] Backup & Recovery4"
excerpt: "ì•„ì´í‹°ìœŒ 0717"
categories:
      - ORACLE11g
tags:
      - ORACLE11g
      - TIL
last-modified-at: 2025-07-17T18:16
---

# ë°±ì—… & ë¦¬ì»¤ë²„ë¦¬ 4

- ğŸ“ ë°ì´í„°ë² ì´ìŠ¤ ì¢…ë£Œ í›„ì— open ì‹œì ì— temp file ì²´í¬í•œ í›„ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±í•œ í›„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹œì‘í•œë‹¤.
    
    ```sql
    -- ë™ì ì„±ëŠ¥ë·°ë¥¼ ì´ìš©í•´ temp fileì´ ì˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
    select name from v$tempfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    
    -- ì •ìƒ ì¢…ë£Œ
    shutdown immediate;
    
    -- ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” tempfile ì§€ìš°ê¸°
    -- í™•ì¸
    ! ls /u01/app/oracle/oradata/ORA19C/temp01.dbf
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    -- ì§€ìš°ê¸°
    ! rm /u01/app/oracle/oradata/ORA19C/temp01.dbf
    
    -- ë°ì´í„°ë² ì´ìŠ¤ ì˜¤í”ˆì‹œì— temp file ì²´í¬í•˜ê³  ì—†ìœ¼ë©´ ìë™ ìƒì„±í•œë‹¤.
    startup
    
    -- í™•ì¸ ì‘ì—…
    ! ls /u01/app/oracle/oradata/ORA19C/temp01.dbf
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    
    --temp file ì¶”ê°€ ì‘ì—…
    alter tablespace temp add tempfile '/u01/app/oracle/oradata/ORA19C/temp02.dbf' size 10m autoextend on;
    
    -- í™•ì¸
    SYS@ora19c> select name from v$tempfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    /u01/app/oracle/oradata/ORA19C/temp02.dbf
    
    -- ì •ìƒ ì¢…ë£Œ
    shutdown immediate;
    
    -- ë¬¼ë¦¬ì ìœ¼ë¡œ temp02 ìˆëŠ”ì§€ í™•ì¸í•œ í›„ ì§€ìš°ê¸°
    ! ls /u01/app/oracle/oradata/ORA19C/temp{01,02}.dbf
    ! rm /u01/app/oracle/oradata/ORA19C/temp{01,02}.dbf
    
    -- ë‹¤ì‹œ ì‹œì‘
    startup
    ! ls /u01/app/oracle/oradata/ORA19C/temp{01,02}.dbf
    /u01/app/oracle/oradata/ORA19C/temp01.dbf  /u01/app/oracle/oradata/ORA19C/temp02.dbf
    
    -- ì¶”ê°€í•œ í…œí”„ íŒŒì¼ ì‚­ì œ
    alter tablespace temp drop tempfile '/u01/app/oracle/oradata/ORA19C/temp02.dbf';
    
    -- í™•ì¸ 
    select name from v$tempfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    ```
    
- ğŸ“ ëª¨ë“  ë°ì´í„° íŒŒì¼, ë¦¬ë‘ ë¡œê·¸ íŒŒì¼, ì»¨íŠ¸ë¡¤ íŒŒì¼ì´ ìˆëŠ” ë””ìŠ¤í¬ ì†ìƒ
    
    1ï¸âƒ£ ì´ˆê¸° íŒŒì¼ì´ ì»¨íŠ¸ë¡¤ íŒŒì¼ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.  pfileì•ˆì— ì»¨íŠ¸ë¡¤ íŒŒì¼ ìœ„ì¹˜ë¥¼ ë°±ì—… ë°›ì•„ ë†“ì€ ì»¨íŠ¸ë¡¤ íŒŒì¼ ìœ„ì¹˜ë¡œ ì„¤ì •í•˜ì.
    
    2ï¸âƒ£ ì»¨íŠ¸ë¡¤ íŒŒì¼ ë‚´ ì¡´ì¬í•˜ê³  ë¦¬ë‘ ë¡œê·¸ íŒŒì¼, ë°ì´í„° íŒŒì¼ ì •ë³´ rename í•˜ê¸° (ê²½ë¡œ ìˆ˜ì •)
    
    ```sql
    -- pfile ìƒì„±
    create pfile from spfile;
    
    -- control file ìœ„ì¹˜ í™•ì¸
    select name from v$controlfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    -- data file ìœ„ì¹˜ í™•ì¸
    select name from v$datafile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/system01.dbf
    /u01/app/oracle/oradata/ORA19C/sysaux01.dbf
    /u01/app/oracle/oradata/ORA19C/undotbs01.dbf
    /u01/app/oracle/oradata/ORA19C/users01.dbf
    
    -- redo log file ìœ„ì¹˜ í™•ì¸
    select * from v$logfile;
    
        GROUP# STATUS  TYPE    MEMBER
    ---------- ------- ------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
             3         ONLINE  /u01/app/oracle/oradata/ORA19C/redo03.log
             2         ONLINE  /u01/app/oracle/oradata/ORA19C/redo02.log
             1         ONLINE  /u01/app/oracle/oradata/ORA19C/redo01.log
    
    -- temp file ìœ„ì¹˜ í™•ì¸
    select name from v$tempfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/temp01.dbf
    
    -- ë°±ì—…ë³¸ ì²´í¬
    ! ls backup/noarch
    
    -- ì»¨íŠ¸ë¡¤ íŒŒì¼ ìœ„ì¹˜ ë³€ê²½
    -- ì´ˆê¸° íŒŒë¼ë¯¸í„° íŒŒì¼ pfile ì•ˆì—ì„œ ìˆ˜ì •
    
    -- âœ… ê¸°ì¡´ ìœ„ì¹˜
    *.control_files='/u01/app/oracle/oradata/ORA19C/control01.ctl'
    
    -- âœ… ìƒˆ ìœ„ì¹˜
    *.control_files='/home/oracle/ora_data/control01.ctl'
    
    --ğŸ” ë°ì´í„°íŒŒì¼ ë˜ëŠ” ë¦¬ë‘ ë¡œê·¸ ìœ„ì¹˜ ë³€ê²½ SQL
    ALTER DATABASE RENAME FILE 'ì´ì „íŒŒì¼' TO 'ìƒˆë¡œìš´íŒŒì¼';
    
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/system01.dbf' TO  '/home/oracle/ora_data/system01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/sysaux01.dbf' TO  '/home/oracle/ora_data/sysaux01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/undotbs01.dbf' TO  '/home/oracle/ora_data/undotbs01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/users01.dbf' TO  '/home/oracle/ora_data/users01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/temp01.dbf' TO  '/home/oracle/ora_data/temp01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo01.log' TO  '/home/oracle/ora_data/redo01.log';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo02.log' TO  '/home/oracle/ora_data/redo02.log';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo03.log' TO  '/home/oracle/ora_data/redo03.log';
    
    -- ì¥ì•  ë°œìƒ
    ! ls /u01/app/oracle/oradata/ORA19C/*
    ! rm /u01/app/oracle/oradata/ORA19C/*
    ! ls /u01/app/oracle/oradata/ORA19C/*
    
    -- ì²´í¬ í¬ì¸íŠ¸í•´ì„œ ì¥ì•  ìœ ë°œ
    alter system checkpoint;
    
    alter system checkpoint
    *
    ERROR at line 1:
    ORA-03113: end-of-file on communication channel
    Process ID: 21733
    Session ID: 21 Serial number: 18672
    
    -- ì ‘ì†ì´ ëŠê²¼ë‹¤. ì™œ ë‚´ë ¤ê°”ì§€? ìƒê°í•˜ë©° dbë¥¼ ê°€ë™ì‹œì¼œë³¸ë‹¤.
    sqlplus / as sysdba
    startup
    
    -- ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ í™•ì¸
    select status from v$instance;
    
    -- ì»¨íŠ¸ë¡¤ íŒŒì¼ ìœ„ì¹˜ í™•ì¸
    show parameter control_files;
    
    -- í•´ë‹¹ ë””ë ‰í† ë¦¬ì— ì‹¤ì œ ì»¨íŠ¸ë¡¤ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    ! ls /u01/app/oracle/oradata/ORA19C
    
    -- dbëŠ” mountê¹Œì§€ë§Œ ì˜¬ë¼ì™”ê³  control íŒŒì¼, ë‹¤ë¥¸ ì¤‘ìš” íŒŒì¼ í™•ì¸í•´ë³´ë‹ˆ ëª¨ë‘ ì‚¬ë¼ì¡Œë‹¤!
    -- ë‹¹í™©í•˜ë©´ì„œ ëª¨ë‘ì—ê²Œ ì¥ì•  ê³µì§€(ë¯¸ë¦¬ ë§Œë“¤ì–´ë†“ì„ ê²ƒ)ë¥¼ í•œë‹¤.
    
    -- SQL*Plus ì¢…ë£Œ
    shutdown abort
    exit;
    
    startup
    -- ì»¨íŠ¸ë¡¤íŒŒì¼ ìœ„ì¹˜ í™•ì¸
    show parameter control_files;
    
    -- ë””ë ‰í† ë¦¬ì— íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
    ! ls /u01/app/oracle/oradata/ORA19C/*
    
    -- ì¸ìŠ¤í„´ìŠ¤ ê°•ì œ ì¢…ë£Œ
    shutdown abort;
    
    -- SQL*Plus ì¢…ë£Œ
    exit
    
    pwd
    # ì¶œë ¥: /home/oracle
    
    -- ìƒˆ ë””ë ‰í† ë¦¬ ìƒì„± ì‹œë„
    mkdir ora_data
    
    -- ë””ë ‰í† ë¦¬ ì¬ìƒì„± ë° ì´ë™
    cd ora_data/
    pwd
    # ì¶œë ¥: /home/oracle/ora_data
    
    -- Oracle ì´ˆê¸°í™” íŒŒë¼ë¯¸í„° ë””ë ‰í† ë¦¬ë¡œ ì´ë™
    cd $ORACLE_HOME/dbs
    
    -- PFILE í¸ì§‘
    vi initora19c.ora
    
    *.control_files='/u01/app/oracle/oradata/ORA19C/control01.ctl' -> *.control_files='/home/oracle/ora_data/control01.ctl'
    
    -- ë°±ì—… íŒŒì¼ ë³µì‚¬
    -- ë°±ì—… ë””ë ‰í† ë¦¬ ì´ë™
    cd backup/noarch/
    
    -- ë°±ì—… ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ í™•ì¸
    ls
    # ê²°ê³¼:
    # control01.ctl  redo01.log  redo02.log  redo03.log  sysaux01.dbf  system01.dbf  temp01.dbf  undotbs01.dbf  users01.dbf
    
    -- ora_data ë””ë ‰í† ë¦¬ë¡œ ëª¨ë“  íŒŒì¼ ë³µì‚¬
    cp -v *.* /home/oracle/ora_data/
    
    sqlplus / as sysdba
    
    -- pfileì„ ì´ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ mountê¹Œì§€ ì‹œì‘í•´ì•¼í•œë‹¤.
    startup pfile='$ORACLE_HOME/dbs/initora19c.ora' mount;
    
    STATUS
    ----------
    MOUNTED
    
    SYS@ora19c>show parameter spfile;
    -- pfileë¡œ 
    
    NAME                                 TYPE        VALUE
    ------------------------------------ ----------- ------------------------------
    spfile                               string
    
    -- ì´ë¦„ ë³€ê²½
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/system01.dbf' TO  '/home/oracle/ora_data/system01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/sysaux01.dbf' TO  '/home/oracle/ora_data/sysaux01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/undotbs01.dbf' TO  '/home/oracle/ora_data/undotbs01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/users01.dbf' TO  '/home/oracle/ora_data/users01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/temp01.dbf' TO  '/home/oracle/ora_data/temp01.dbf';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo01.log' TO  '/home/oracle/ora_data/redo01.log';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo02.log' TO  '/home/oracle/ora_data/redo02.log';
    ALTER DATABASE RENAME FILE '/u01/app/oracle/oradata/ORA19C/redo03.log' TO  '/home/oracle/ora_data/redo03.log';
    
    -- ë°ì´í„°ë² ì´ìŠ¤ open
    alter database open;
    ```
    
    â–¶ï¸ ì›ë³µ
    
    ```sql
    shutdown abort;
    exit;
    cp -v backup/noarch/* /u01/app/oracle/oradata/ORA19C/
    startup
    show parameter control_files;
    
    -- ë‹¤ì‹œ spfileë¡œ open ë¨
    NAME                                 TYPE        VALUE
    ------------------------------------ ----------- ------------------------------
    control_files                        string      /u01/app/oracle/oradata/ORA19C
    
    -- ê°ê° ê²½ë¡œ í™•ì¸í•˜ê³ 
    -- ora_data ì‚­ì œ
    ! rm -r ora_data
    -- í™•ì¸
    !ls
    -- pfile ì´ˆê¸°í™”
    create pfile from spfile;
    ```
    
- ğŸ“ ë˜ ë‹¤ë¥¸ ë¶ˆì™„ì „ ë³µêµ¬ ë°©ë²•
    
    1ï¸âƒ£ ë°ì´í„° íŒŒì¼, ì»¨íŠ¸ë¡¤ íŒŒì¼ë§Œ ë°±ì—…
    
    ```sql
    SYS@ora19c> shutdown immediate;
    Database closed.
    Database dismounted.
    ORACLE instance shut down.
    SYS@ora19c> !
    [oracle@oracle ~]$ cd backup/noarch/
    [oracle@oracle noarch]$ ls
    control01.ctl   redo01.log  redo03.log    system01.dbf  undotbs01.dbf
    oltp_tbs01.dbf  redo02.log  sysaux01.dbf  temp01.dbf    users01.dbf
    
    # ë°±ì—…í•´ë†“ì„ ìœ„ì¹˜ ìƒì„±
    [oracle@oracle noarch]$ mkdir 20250717
    
    # ë°±ì—…
    [oracle@oracle 20250717]$ cp -v /u01/app/oracle/oradata/ORA19C/*.ctl .
    â€˜/u01/app/oracle/oradata/ORA19C/control01.ctlâ€™ -> â€˜./control01.ctlâ€™
    
    [oracle@oracle 20250717]$ cp -v /u01/app/oracle/oradata/ORA19C/*.dbf .
    â€˜/u01/app/oracle/oradata/ORA19C/oltp_tbs01.dbfâ€™ -> â€˜./oltp_tbs01.dbfâ€™
    â€˜/u01/app/oracle/oradata/ORA19C/sysaux01.dbfâ€™ -> â€˜./sysaux01.dbfâ€™
    â€˜/u01/app/oracle/oradata/ORA19C/system01.dbfâ€™ -> â€˜./system01.dbfâ€™
    â€˜/u01/app/oracle/oradata/ORA19C/temp01.dbfâ€™ -> â€˜./temp01.dbfâ€™
    â€˜/u01/app/oracle/oradata/ORA19C/undotbs01.dbfâ€™ -> â€˜./undotbs01.dbfâ€™
    â€˜/u01/app/oracle/oradata/ORA19C/users01.dbfâ€™ -> â€˜./users01.dbfâ€™
    
    [oracle@oracle 20250717]$ ls
    control01.ctl  oltp_tbs01.dbf  sysaux01.dbf  system01.dbf  temp01.dbf  undotbs01.dbf  users01.dbf
    
    SYS@ora19c> startup;
    ORACLE instance started.
    
    Total System Global Area  713027608 bytes
    Fixed Size                  8900632 bytes
    Variable Size             520093696 bytes
    Database Buffers          176160768 bytes
    Redo Buffers                7872512 bytes
    Database mounted.
    Database opened.
    
    # ì–´ëŠ ì‹œì ì— ë°±ì—…ì„ ë°›ì•„ë‘ì—ˆëŠ” ì§€ í™•ì¸í•´ë‘ì!
    SYS@ora19c> select * from v$log;
    
     GROUP#    THREAD#  SEQUENCE#      BYTES  BLOCKSIZE    MEMBERS ARC STATUS           FIRST_CHANGE# FIRST_TIM NEXT_CHANGE# NEXT_TIME     CON_ID
    ---------- ---------- ---------- ---------- ---------- ---------- --- ---------------- ------------- --------- ------------ --------- ----------
             1          1         10  209715200        512          1 NO  INACTIVE               2661346 09-JUL-25      2767692 14-JUL-25          0
             2          1         11  209715200        512          1 NO  CURRENT                2767692 14-JUL-25   1.8447E+19                    0
             3          1          9  209715200        512          1 NO  INACTIVE               2527330 09-JUL-25      2661346 09-JUL-25          0
    
        
    ```
    
    â–¶ï¸ ë°±ì—… ì´í›„ì— ë¦¬ë‘ ì •ë³´ê°€ ì—†ë‹¤ëŠ” ì „ì œí•˜ì—
    
    ```sql
    -- ë¡œê·¸ ìŠ¤ìœ„ì¹˜ë¡œ ë¦¬ë‘ ì •ë³´ ì‚¬ë¼ì§€ê²Œ í•¨
    alter system switch logfile;
    /
    /
    -- í™•ì¸
    select * from v$log;
    -- db í™•ì¸
    shutdown immediate
    
    # ì¥ì• ë°œìƒìœ ë„
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/users01.dbf
    /u01/app/oracle/oradata/ORA19C/users01.dbf
    
    SYS@ora19c> ! rm /u01/app/oracle/oradata/ORA19C/users01.dbf
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/users01.dbf
    ls: cannot access /u01/app/oracle/oradata/ORA19C/users01.dbf: No such file or directory
    
    -- ì‹œì‘í•˜ë©´ ì˜¤ë¥˜ê°€ ë‚œë‹¤. (users íŒŒì¼ì´ ì—†ê¸°ë•Œë¬¸)
    startup
    
    -- ë¦¬ì»¤ë²„ ëŒ€ìƒ íŒŒì¼ í™•ì¸
    select * from v$recover_file;
    
    -- ë¬¸ì œë˜ëŠ” ë°ì´í„° íŒŒì¼ offline 
    ALTER DATABASE DATAFILE '/u01/app/oracle/oradata/ORA19C/users01.dbf' OFFLINE DROP;
    
    -- user01.dbf ë°±ì—…ë³¸ ì°¾ì•„ì„œ restore
    ! ls -v backup/noarch/20250717/users01.dbf
    ! cp -v backup/noarch/20250717/users01.dbf /u01/app/oracle/oradata/ORA19C/
    
    -- ë°±ì—… ì´í›„ ë³€ê²½ ì •ë³´ë¥¼ ì´ìš©í•´ì„œ ë³µêµ¬(ë¦¬ë‘ ì ìš©)
    recover datafile '/u01/app/oracle/oradata/ORA19C/users01.dbf'
    recover datafile 7
    recover tablespace users
    
    --> ì—ëŸ¬ë‚¨
    --> ë°±ì—… ì‹œì ë¶€í„° í˜„ì¬ê¹Œì§€ ë¦¬ë‘ë¥¼ ì ìš©í•´ì•¼ ë³µêµ¬ë¥¼ í•  ìˆ˜ ìˆëŠ”ë° ì—†ì–´ì„œ ë³µêµ¬ ì‘ì—… ì‹¤íŒ¨
    --> ì™„ì „ë³µêµ¬ì‹¤íŒ¨
    
    -- ë¶ˆì™„ì „ ë³µêµ¬
    -- ìµœì‹  ë°±ì—…ë³¸ì´ ì•„ë‹ˆê³ , ë¦¬ë‘ ì •ë³´ë„ í˜„í–‰í™”ë˜ì§€ ì•Šì•˜ë‹¤. 
    -- ë‹¤ë¥¸ ì‘ì—…ì„ í•´ì•¼ í•œë‹¤.
    ```
    
    â–¶ï¸ ë¶ˆì™„ì „ ë³µêµ¬ ë‹¤ë¥¸ ë°©ë²•
    
    ```sql
    shutdown abort
    -- ì˜ë¯¸ê°€ ì—†ê¸° ë•Œë¬¸ì— ë‹¤ ì§€ì›€
    ! ls /u01/app/oracle/oradata/ORA19C/
    ! rm /u01/app/oracle/oradata/ORA19C/*
    
    -- 20250717 ë°±ì—… ë°›ì•„ë†“ì€ ê²ƒ cp
    ! cp -v backup/noarch/20250717/* /u01/app/oracle/oradata/ORA19C/
    
    -- mountê¹Œì§€ë§Œ
    startup mount
    
    -- ë¬¼ë¦¬ì ìœ¼ë¡œ ë¦¬ë‘ íŒŒì¼ ì—†ì–´ì¡Œê³ , ì§€ê¸ˆì€ ë°±ì—…ë°›ì•˜ë˜ ì»¨íŠ¸ë¡¤ íŒŒì¼ë¡œ ì‹¤í–‰í•œ ê²ƒì„
    -- ê° íŒŒì¼ í™•ì¸ (datafile, logfile, tempfile)
    -- recover ì‹œë„
    
    -- ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ ì´ìš©í•´ì„œ ë³µêµ¬, ë°±ì—… ì´í›„ ë¦¬ë‘ê°€ ì—†ê¸° ë•Œë¬¸ì— cancel ì¢…ë£Œí•´ì•¼ í•œë‹¤.
    recover database until cancel using backup controlfile;
    -- recover database : ë¦¬ì»¤ë²„ë¦¬ ì‹œì ê¹Œì§€ì˜ ë¡œê·¸ íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ê³„ì† ì…ë ¥í•˜ë‹¤ê°€ ì‚¬ìš©ìê°€ CANCEL ì…ë ¥ ì‹œ ì¢…ë£Œ
    -- using backup controlfile : **ë°±ì—…ëœ ì»¨íŠ¸ë¡¤ íŒŒì¼**ì„ ì‚¬ìš©í•˜ì—¬ ë³µêµ¬í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
    
    cancel  -- ğŸ“ í•„ìˆ˜!
    alter database open resetlogs;   -- ë¦¬ì»¤ë²„ë¦¬ í›„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—´ ë•Œ, ë¦¬ë‘ ë¡œê·¸(redo log)ë¥¼ ì¬ì„¤ì •(reset) í•œë‹¤ëŠ” ì˜ë¯¸
    
    select * from v$log;
    --> ë¦¬ë‘ê°€ ì†ìƒë˜ì—ˆê¸° ë•Œë¬¸ì— sequence ë²ˆí˜¸ë¥¼ 1ë²ˆë¶€í„° ì‹œì‘í•´ì•¼ í•˜ê³  redo log fileì„ ì¬ìƒì„±í•œë‹¤.
    --> í™•ì¸í•´ë³´ë‹ˆ ì‹œí€€ìŠ¤ ë²ˆí˜¸ëŠ” 1ë²ˆë¶€í„° ë‹¤ì‹œ ì‹œì‘í•œë‹¤.
    --> ê³¼ê±°ì˜ ë°±ì—…ë³¸ì€ ì˜ë¯¸ê°€ ì—†ë‹¤.
    --> ë‹¤ì‹œ ë°±ì—…ì„ ë°›ê¸°.
    ```
    
    â–¶ï¸ ì›ë³µ
    
    ```sql
    shutdown abort
    ! cp -v backup/noarch/* /u01/app/oracle/oradata/ORA19C/
    select * from v$log;
    rm -r 20250717
    ```
    
- ğŸ“ datafile, redo log fileì€ ì†ìƒë˜ì§€ ì•Šê³  control fileë§Œ ì†ìƒë˜ì—ˆì„ ë•Œ ë³µêµ¬ (ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ ì´ìš©)
    
    ```sql
    select name from v$controlfile;
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    create table hr.new(id number) tablespace users;
    insert into hr.new(id) values(1);
    commit;
    select * from v$log;
    -- ì¥ì•  ìœ ë°œ 
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! rm /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    shutdown abort
    
    -- ë°±ì—… control file ì°¾ì•„ì„œ restore
    ! ls backup/noarch/*.ctl
    ! cp -v backup/noarch/*.ctl /u01/app/oracle/oradata/ORA19C/
    
    -- ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ì„ ì´ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ mountê¹Œì§€ ì‹œì‘
    startup mount  -- ê³¼ê±° ì»¨íŠ¸ë¡¤ íŒŒì¼ë¡œ ë³µêµ¬í•´ì•¼ í•œë‹¤.
    
    SYS@ora19c> recover database using backup controlfile
    ORA-00279: change 2834606 generated at 07/14/2025 09:45:27 needed for thread 1
    ORA-00289: suggestion : /u01/app/oracle/fast_recovery_area/ORA19C/archivelog/2025_07_17/o1_mf_1_11_%u_.arc
    ORA-00280: change 2834606 for thread 1 is in sequence #11
    
    -- ë¦¬ë‘ ì •ë³´ê°€ ë¶„ëª…íˆ ìˆëŠ”ë°, ì•„ì¹´ì´ë¸Œì—ì„œ ì°¾ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë‚œë‹¤. 
    Specify log: {<RET>=suggested | filename | AUTO | CANCEL}
    auto
    ORA-00308: cannot open archived log '/u01/app/oracle/fast_recovery_area/ORA19C/archivelog/2025_07_17/o1_mf_1_11_%u_.arc'
    ORA-27037: unable to obtain file status
    Linux-x86_64 Error: 2: No such file or directory
    Additional information: 7
    
    ORA-00308: cannot open archived log '/u01/app/oracle/fast_recovery_area/ORA19C/archivelog/2025_07_17/o1_mf_1_11_%u_.arc'
    ORA-27037: unable to obtain file status
    Linux-x86_64 Error: 2: No such file or directory
    Additional information: 7
    
    select a.group#, b.sequence#, a.member, b.bytes/1024/1024 mb, b.archived, b.status,b.first_time, b.next_time
    from v$logfile a, v$log b
    where a.group# = b.group#
    order by 1;
    
        GROUP#  SEQUENCE# MEMBER
    ---------- ---------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
             1         10 /u01/app/oracle/oradata/ORA19C/redo01.log
             2         11 /u01/app/oracle/oradata/ORA19C/redo02.log
             3          9 /u01/app/oracle/oradata/ORA19C/redo03.log
    
    recover database using backup controlfile
    ORA-00279: change 2834606 generated at 07/14/2025 09:45:27 needed for thread 1
    ORA-00289: suggestion : /u01/app/oracle/fast_recovery_area/ORA19C/archivelog/2025_07_17/o1_mf_1_11_%u_.arc
    ORA-00280: change 2834606 for thread 1 is in sequence #11
    
    recover database using backup controlfile
    
    Specify log: {<RET>=suggested | filename | AUTO | CANCEL}
    /u01/app/oracle/oradata/ORA19C/redo02.log
    
    alter database open -- ì˜¤ë¥˜
    
    -- ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ ì´ìš©í•´ì„œ ë³µêµ¬í–ˆë‹¤ë©´, resetlog ë¡œ opení•´ì•¼ í•œë‹¤.
    alter database open resetlogs;
    ```
    
    â–¶ï¸ ì›ë³µ
    
    ```sql
    shutdown abort
    ! cp -v backup/noarch/* /u01/app/oracle/oradata/ORA19C/
    ```
    
- ğŸ“ datafile, redo log fileì€ ì†ìƒë˜ì§€ ì•Šê³  control fileë§Œ ì†ìƒë˜ì—ˆì„ ë•Œ ë³µêµ¬(**ì»¨íŠ¸ë¡¤ íŒŒì¼ ì¬ìƒì„±**)
    
    ```sql
    SYS@ora19c> select * from v$log;
    
        GROUP#    THREAD#  SEQUENCE#      BYTES  BLOCKSIZE    MEMBERS ARC STATUS           FIRST_CHANGE# FIRST_TIM NEXT_CHANGE# NEXT_TIME     CON_ID
    ---------- ---------- ---------- ---------- ---------- ---------- --- ---------------- ------------- --------- ------------ --------- ----------
             1          1         10  209715200        512          1 NO  INACTIVE               2661346 09-JUL-25      2767692 14-JUL-25          0
             2          1         11  209715200        512          1 NO  CURRENT                2767692 14-JUL-25   1.8447E+19                    0
             3          1          9  209715200        512          1 NO  INACTIVE               2527330 09-JUL-25      2661346 09-JUL-25          0
    
    select name from v$controlfile;
    
    select a.file#, b.name tbs_name, a.name file_name, a.status, a.checkpoint_change#
    from v$datafile a, v$tablespace b
    where a.ts# = b.ts#;  2    3
    
         FILE# TBS_NAME                       FILE_NAME                                                              STATUS  CHECKPOINT_CHANGE#
    ---------- ------------------------------ ---------------------------------------------------------------------- ------- ------------------
             3 SYSAUX                         /u01/app/oracle/oradata/ORA19C/sysaux01.dbf                            ONLINE             2834609
             1 SYSTEM                         /u01/app/oracle/oradata/ORA19C/system01.dbf                            SYSTEM             2834609
             4 UNDOTBS1                       /u01/app/oracle/oradata/ORA19C/undotbs01.dbf                           ONLINE             2834609
             7 USERS                          /u01/app/oracle/oradata/ORA19C/users01.dbf                             ONLINE             2834609
    
    NAME
    --------------------------------------------------
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    create table hr.new(id number) tablespace users;
    insert into hr.new(id) values(1);
    commit;
    select * from v$log;
    -- ì¥ì•  ìœ ë°œ 
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! rm /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    shutdown abort
    
    -- ë°±ì—… control file ì°¾ì•„ì„œ restore
    ! ls backup/noarch/*.ctl
    ! cp -v backup/noarch/*.ctl /u01/app/oracle/oradata/ORA19C/
    
    -- ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ì„ ì´ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ mountê¹Œì§€ ì‹œì‘
    startup mount  -- ê³¼ê±° ì»¨íŠ¸ë¡¤ íŒŒì¼ë¡œ ë³µêµ¬í•´ì•¼ í•œë‹¤.
    
    -- ë°±ì—… ì»¨íŠ¸ë¡¤ íŒŒì¼ì„ ì´ìš©í•´ì„œ trace íŒŒì¼ ìƒì„±í•œ í›„ ì»¨íŠ¸ë¡¤ íŒŒì¼ì„ ì¬ìƒì„±í•´ì„œ ë³µêµ¬
    alter database backup controlfile to trace as '/home/oracle/create_control.sql';
    
    ! ls /home/oracle/create_control.sql
    /home/oracle/create_control.sql
    
    shutdown abort;
    exit
    vi create_control.sql
    ```
    
    â–¶ï¸ ë‹¤ìŒì„ ë³µì‚¬í–ˆë‹¤.
    
    ```sql
    STARTUP NOMOUNT
    CREATE CONTROLFILE REUSE DATABASE "ORA19C" NORESETLOGS  NOARCHIVELOG
        MAXLOGFILES 16     -- ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ì˜ ìˆ˜ (MAX)
        MAXLOGMEMBERS 3    
        MAXDATAFILES 100   -- ì´ DBì—ì„œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ë°ì´í„° íŒŒì¼ ìˆ˜
        MAXINSTANCES 8     -- 
        MAXLOGHISTORY 292  -- ì•„ì¹´ì´ë¸Œ ëª¨ë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³¼ê±° ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ ì •ë³´ ê°¯ìˆ˜
    LOGFILE
      GROUP 1 '/u01/app/oracle/oradata/ORA19C/redo01.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 2 '/u01/app/oracle/oradata/ORA19C/redo02.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 3 '/u01/app/oracle/oradata/ORA19C/redo03.log'  SIZE 200M BLOCKSIZE 512
    DATAFILE
      '/u01/app/oracle/oradata/ORA19C/system01.dbf',
      '/u01/app/oracle/oradata/ORA19C/sysaux01.dbf',
      '/u01/app/oracle/oradata/ORA19C/undotbs01.dbf',
      '/u01/app/oracle/oradata/ORA19C/users01.dbf'
    CHARACTER SET AL32UTF8
    ;
    
    ALTER DATABASE OPEN;
    ALTER TABLESPACE TEMP ADD TEMPFILE '/u01/app/oracle/oradata/ORA19C/temp01.dbf' REUSE;
    ```
    
    â–¶ï¸ exit í•˜ê³  ë‚˜ì™€ì„œ ë‹¤ìŒì„ ìˆ˜í–‰
    
    ```sql
    STARTUP NOMOUNT
    CREATE CONTROLFILE REUSE DATABASE "ORA19C" NORESETLOGS  NOARCHIVELOG
        MAXLOGFILES 16     -- ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ì˜ ìˆ˜ (MAX)
        MAXLOGMEMBERS 3    
        MAXDATAFILES 100   -- ì´ DBì—ì„œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ë°ì´í„° íŒŒì¼ ìˆ˜
        MAXINSTANCES 8     -- 
        MAXLOGHISTORY 292  -- ì•„ì¹´ì´ë¸Œ ëª¨ë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³¼ê±° ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ ì •ë³´ ê°¯ìˆ˜
    LOGFILE
      GROUP 1 '/u01/app/oracle/oradata/ORA19C/redo01.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 2 '/u01/app/oracle/oradata/ORA19C/redo02.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 3 '/u01/app/oracle/oradata/ORA19C/redo03.log'  SIZE 200M BLOCKSIZE 512
    DATAFILE
      '/u01/app/oracle/oradata/ORA19C/system01.dbf',
      '/u01/app/oracle/oradata/ORA19C/sysaux01.dbf',
      '/u01/app/oracle/oradata/ORA19C/undotbs01.dbf',
      '/u01/app/oracle/oradata/ORA19C/users01.dbf'
    CHARACTER SET AL32UTF8
    ;
    
    SYS@ora19c> select status from v$instance;
    
    STATUS
    ------------
    MOUNTED
    
    SYS@ora19c> show parameter control_file;
    
    NAME                                 TYPE        VALUE
    ------------------------------------ ----------- ------------------------------
    control_file_record_keep_time        integer     7
    control_files                        string      /u01/app/oracle/oradata/ORA19C
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C
    control01.ctl  redo01.log  redo02.log  redo03.log  sysaux01.dbf  system01.dbf  temp01.dbf  undotbs01.dbf  users01.dbf
    
    ALTER DATABASE OPEN;
    ALTER TABLESPACE TEMP ADD TEMPFILE '/u01/app/oracle/oradata/ORA19C/temp01.dbf' REUSE;
    ```
    
    â–¶ï¸ ì›ë³µ
    
    ```sql
    shutdown abort
    ! cp -v backup/noarch/* /u01/app/oracle/oradata/ORA19C/
    ```
    
- ğŸ“ datafile, redo log fileì€ ì†ìƒë˜ì§€ ì•Šê³  control fileë§Œ ì†ìƒë˜ì—ˆë‹¤. í•˜ì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë¹„ì •ìƒì ì¸ ì¢…ë£Œë¨. ì´ê²ƒì— ëŒ€í•œ ë³µêµ¬ ë°©ì‹ (ì»¨íŠ¸ë¡¤ íŒŒì¼ ì¬ìƒì„±)
    
    ```sql
    create table hr.new(id number) tablespace users;
    insert into hr.new(id) values(1);
    commit;
    select * from v$log;
    
    # ì¥ì•  ìœ ë°œ
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! rm /u01/app/oracle/oradata/ORA19C/control01.ctl
    
    SYS@ora19c> ! ls /u01/app/oracle/oradata/ORA19C/control01.ctl
    ls: cannot access /u01/app/oracle/oradata/ORA19C/control01.ctl: No such file or directory
    
    alter system switch logfile;
    /
    /
    
    SYS@ora19c> select * from v$log;
    
        GROUP#    THREAD#  SEQUENCE#      BYTES  BLOCKSIZE    MEMBERS ARC STATUS           FIRST_CHANGE# FIRST_TIM NEXT_CHANGE# NEXT_TIME     CON_ID
    ---------- ---------- ---------- ---------- ---------- ---------- --- ---------------- ------------- --------- ------------ --------- ----------
             1          1         10  209715200        512          1 NO  INACTIVE               2661346 09-JUL-25      2767692 14-JUL-25          0
             2          1         11  209715200        512          1 NO  CURRENT                2767692 14-JUL-25   1.8447E+19                    0
             3          1          9  209715200        512          1 NO  INACTIVE               2527330 09-JUL-25      2661346 09-JUL-25          0
    
    -- ì»¨íŠ¸ë¡¤ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆëŠ”ë° ë‹¹ì¥ì€ ì˜¤ë¥˜ê°€ ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
    -- hr ì„¸ì…˜
    HR@ora19c> select count(*) from hr.employees;
    
      COUNT(*)
    ----------
           107
    
    HR@ora19c> conn / as sysdba
    Connected.
    SYS@ora19c> select * from v$database;
    
    select * from v$database
                  *
    ERROR at line 1:
    ORA-00210: cannot open the specified control file
    ORA-00202: control file: '/u01/app/oracle/oradata/ORA19C/control01.ctl'
    ORA-27041: unable to open file
    Linux-x86_64 Error: 2: No such file or directory
    Additional information: 3
    
    -- ì •ìƒ ì¢…ë£Œ ë¶ˆê°€
    SYS@ora19c> shutdown immediate;
    **Database closed. -- ğŸŒ³ ì˜¤ë¥˜ê°€ ë‚œ ê²ƒì²˜ëŸ¼ ë³´ì˜€ì§€ë§Œ, ì²´í¬í¬ì¸íŠ¸ ì •ìƒì ìœ¼ë¡œ ë°œìƒëë‹¤ëŠ” ëœ». ê·¸ë˜ì„œ ì˜¤ë¥˜ê°€ ì•ˆë‚œê²ƒì„.**
    ORA-00210: cannot open the specified control file
    ORA-00202: control file: '/u01/app/oracle/oradata/ORA19C/control01.ctl'
    ORA-27041: unable to open file
    Linux-x86_64 Error: 2: No such file or directory
    Additional information: 3
    
    shutdown abort;
    
    STARTUP NOMOUNT
    CREATE CONTROLFILE REUSE DATABASE "ORA19C" NORESETLOGS  NOARCHIVELOG
        MAXLOGFILES 16     -- ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ì˜ ìˆ˜ (MAX)
        MAXLOGMEMBERS 3    
        MAXDATAFILES 100   -- ì´ DBì—ì„œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ë°ì´í„° íŒŒì¼ ìˆ˜
        MAXINSTANCES 8     -- 
        MAXLOGHISTORY 292  -- ì•„ì¹´ì´ë¸Œ ëª¨ë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³¼ê±° ë¦¬ë‘ ë¡œê·¸ ê·¸ë£¹ ì •ë³´ ê°¯ìˆ˜
    LOGFILE
      GROUP 1 '/u01/app/oracle/oradata/ORA19C/redo01.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 2 '/u01/app/oracle/oradata/ORA19C/redo02.log'  SIZE 200M BLOCKSIZE 512,
      GROUP 3 '/u01/app/oracle/oradata/ORA19C/redo03.log'  SIZE 200M BLOCKSIZE 512
    DATAFILE
      '/u01/app/oracle/oradata/ORA19C/system01.dbf',
      '/u01/app/oracle/oradata/ORA19C/sysaux01.dbf',
      '/u01/app/oracle/oradata/ORA19C/undotbs01.dbf',
      '/u01/app/oracle/oradata/ORA19C/users01.dbf'
    CHARACTER SET AL32UTF8
    ;
    
    ALTER DATABASE OPEN;
    -- ë‚œ ì •ìƒì ìœ¼ë¡œ ì—´ë ¸ëŠ”ë° ì™œ ì—´ë ¸ì§€?
    -- **ğŸŒ³ ì°¸ì¡° : shutdown immediate í•´ì„œ ì˜¤ë¥˜ë‚¬ëŠ”ë° ê·¸ ì™€ì¤‘ì— Database closed.í•˜ë©° ì œëŒ€ë¡œ ì²´í¬í¬ì¸íŠ¸ ë°œìƒ** 
    
    /*
    ERROR at line 1:
    ORA-01113: file 1 needs media recovery
    ORA-01110: data file 1: '/u01/app/oracle/oradata/ORA19C/system01.dbf'
    --> ì´ë ‡ê²Œ ì—ëŸ¬ë‚˜ëŠ” ê²ƒì´ ì •ë‹µ.
    --> ì´ë ‡ê²Œ ë˜ëŠ” ê²½ìš°ëŠ”
    recover database í•œë²ˆ í•´ì£¼ì.
    */
    
    ALTER TABLESPACE TEMP ADD TEMPFILE '/u01/app/oracle/oradata/ORA19C/temp01.dbf' REUSE;
    
    ```