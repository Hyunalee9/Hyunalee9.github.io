---
title: "[77일차] LRU 알고리즘 2 "
excerpt: "아이티윌 0813"
categories:
      - ORACLE11g
tags:
      - ORACLE11g
      - TIL
last-modified-at: 2025-08-13T21:08
---

# LRU  알고리즘2

물리적 (physical) I/O

- access 하려는 블록이 메모리에 없을 경우
    - working set 을 관리하는  cache buffers lru chain latch 를 획득해야 한다.
    
    이 과정에서 경합이 발생하면 latch: cache buffers lru chain 이벤트가 발생한다.
    
- LRU LIST의 보조 리스트에서 free buffer 를 찾는다.
    - 만약 보조 리스트에  free buffer 가 없을 경우 메인 리스트  cold 영역 제일 뒤에서부터 free buffer를 찾는다.
    - 찾는 도중에 touch count 가 1 이하인 버퍼가  free buffer 로 사용할 수 있다.
    - 찾는 도중에 touch count가 2 이상인 버퍼를 만나면 hot 영역 앞으로 옮기고 해당 버퍼의 touch count 는 0으로 초기화 시킨다.
    - 만약에 LRU LIST 에서 free buffer를 40% scan 을 하고도 free buffer 를 찾지 못하면 DBWR에게 dirty buffer를 파일에 기록하고  free buffer를 확보해 줄 것을 요청한다. 이때 대기하는 이벤트 (free buffer)
    - free buffer를 찾게 되면 해당 버퍼에 대해 buffer lock을 exculsive mode로 획득하고 데이터 파일에서 블록을 해당 위치로 읽어 들인다.
    - 물리적으로 읽어 들이고 있는 중에 다른 세션에서 같은 블록을 access하려는 경우 기다리도록 수행한다. 이때 발생하는 이벤트 (read by other session)

```bash
# single block I/O 수행
- rowid scan 발생
- db file sequential read

# multi block I/O 수행
- table full scan, index fast full scan
- db file scattered read

# db file parallel read
- prefetch 기능이 수행될 경우(물리적 I/O 발생시 한번 읽어 들일때 다음에 읽어야할 블록을 같이 읽어 들이는 기능)

# direct path read
- data buffer cache에 블록들을 올리지 않고 UGA에 CURSOR에 바로 읽어 오는 방식
```